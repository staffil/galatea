{% load static %} 
{% load i18n %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" style="background-color: #3b0d69;">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% trans "GALATEA - Chat with Celebrities" %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Boldonse&family=Bungee&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Oswald:wght@576&family=Special+Gothic+Expanded+One&family=Sunflower:wght@300&display=swap" rel="stylesheet">
<link rel="icon" href="/static/img/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/static/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'css/distribute/distribute.css' %}">
    <link rel="stylesheet" href="{% static 'css/home/main.css'%}">
    <link rel="stylesheet" href="{% static 'css/home/main2.css'%}">
    <link rel="stylesheet" href="{% static 'css/home/llm_section.css' %}">
    <link rel="stylesheet" href="{% static 'css/home/llm_intro.css' %}">

    <script src="{% static 'js/home/main.js' %}"></script>
    <script src="{% static 'js/home/user_intro.js' %}"></script>

    <!-- Open Graph (SNS 공유용) -->
    <meta property="og:title" content="GALATEA AI - 음성 대화형 챗봇" />
    <meta property="og:description" content="자연스러운 음성 대화형 AI 챗봇. 고객과 사람처럼 대화하며 상담과 안내를 제공합니다." />
    <meta property="og:image" content="https://galatea.website/static/img/intro2.png">
    <meta property="og:url" content="https://galatea.website" />
    <meta property="og:type" content="website" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

<meta name="google-adsense-account" content="ca-pub-3542211779359374">
    <!-- Meta Description (검색 결과용) -->
    <meta name="description" content="문자만 입력하는 챗봇은 이제 그만! GALATEA AI는 음성 기반 대화형 AI로, 실제 사람처럼 대화 경험을 제공합니다. GALATEA AI는 단순한 챗봇이 아닙니다. 음성으로 사람처럼 대화하며, 자연스러운 상담·안내를 제공합니다. 지금 무료 체험으로 직접 경험해보세요. ">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3542211779359374"
     crossorigin="anonymous"></script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "GALATEA AI",
  "url": "https://www.galatea.website",
  "logo": "https://www.galatea.website/static/img/logo.png"
}
</script>


</head>
<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    height: 100%;
    background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%) fixed;
}

body {
    height: 100%;
    min-height: 100%;
    font-family: 'Inter', 'Noto Sans KR', sans-serif;
    background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%) fixed;
    color: #ffffff;
    overflow-x: hidden;
}

/* 헤더 */
header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: rgba(15, 15, 35, 0.95);
    border-bottom: 1px solid rgba(139, 92, 246, 0.2);
}

main {
    padding-top: 60px;
    min-height: 100vh;
}

/* 사이드바 토글 */
#sidebar-toggle {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, #8b5cf6, #06b6d4);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 16px;
    cursor: pointer;
    z-index: 999;
    transition: all 0.3s ease;
    padding: 15px;
    margin-top: 30px;
}

#sidebar-toggle:hover {
    transform: scale(1.1);
}

#sidebar-content {
    position: fixed;
    top: 135px;
    right: 20px;
    background: linear-gradient(135deg, rgba(15,15,35,0.95), rgba(26,26,46,0.95));
    border: 1px solid rgba(139,92,246,0.2);
    border-radius: 12px;
    padding: 16px;
    min-width: 180px;
    z-index: 998;
    transition: all 0.3s ease;
}

#sidebar-content.collapsed {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
}

.languageSelect, .helpdesk {
    margin-bottom: 15px;
}

.languageSelect label {
    color: #e2e8f0;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
}

.languageSelect select {
    width: 100%;
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid rgba(139,92,246,0.3);
    background: rgba(139,92,246,0.1);
    color: #e2e8f0;
    font-size: 12px;
    margin-bottom: 8px;
}

.languageSelect button, .helpdesk a {
    display: block;
    width: 100%;
    padding: 6px 10px;
    margin-bottom: 6px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 12px;
    font-weight: 500;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid rgba(139,92,246,0.3);
    background: linear-gradient(135deg, rgba(139,92,246,0.1), rgba(6,182,212,0.1));
    color: #e2e8f0;
    cursor: pointer;
}

.languageSelect button:hover, .helpdesk a:hover {
    background: linear-gradient(135deg, #8b5cf6, #06b6d4);
}

/* 메인 네비게이션 */
.main-nav {
    display: flex;
    justify-content: center;
    gap: 10px;
    padding: 20px 10px;
    flex-wrap: wrap;
}

.nav-button {
    padding: 12px 20px;
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 25px;
    color: #ffffff;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.nav-button:hover {
    background: rgba(139, 92, 246, 0.3);
    transform: translateY(-2px);
}

.nav-button.special {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
}

/* 뉴스 섹션 */
.news-section {
    margin: 20px 15px;
}

.news-container {
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 16px;
    overflow: hidden;
    position: relative;
}

.news-slider {
    display: flex;
    transition: transform 0.5s ease;
}

.news-slide {
    min-width: 100%;
    padding: 20px;
}

.news-slide img {
    width: 100%;
    max-height: 180px;
    object-fit: cover;
    border-radius: 12px;
    margin-bottom: 15px;
}

.news-content {
    text-align: left;
}

.news-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 10px;
}

.news-description {
    font-size: 0.95rem;
    color: #b8c5d1;
    line-height: 1.6;
    margin-bottom: 15px;
}

.news-link {
    display: inline-block;
    padding: 10px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.9rem;
}

.nav-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: rgba(139, 92, 246, 0.8);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 10;
}

.nav-btn.prev { left: 10px; }
.nav-btn.next { right: 10px; }

.indicators {
    display: flex;
    justify-content: center;
    gap: 8px;
    padding: 15px;
}

.indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.indicator.active {
    background: #8b5cf6;
    width: 24px;
    border-radius: 5px;
}

/* 섹션 타이틀 */
.section-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffffff;
    margin: 30px 0 20px 20px;
    text-align: left;
}

/* LLM 카드 */
.main-content {
    padding: 0 15px 30px;
}

.llm-container2 {
    margin-bottom: 30px;
}

.llm-row {
    margin-bottom: 15px;
}

.llm-cards-horizontal {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding: 10px 0;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
}

.llm-cards-horizontal::-webkit-scrollbar {
    display: none;
}

.llm-card {
    flex: 0 0 200px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 16px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
}

.llm-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
}

.llm-image-container {
    height: 120px;
    overflow: hidden;
}

.llm-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.llm-card-body {
    padding: 12px;
}

.llm-name {
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
    margin-bottom: 8px;
}

.genre-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
}

.genre-tag {
    padding: 4px 8px;
    border-radius: 10px;
    font-size: 0.75rem;
    color: white;
}

/* 인기 유저 */
.popular-users-section {
    padding: 0 15px 30px;
}

.users-list {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding: 10px 0;
    -webkit-overflow-scrolling: touch;
}

.users-list::-webkit-scrollbar {
    display: none;
}

.user-card {
    flex: 0 0 150px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 16px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.user-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(139, 92, 246, 0.4);
}

.user-avatar img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
}

.username {
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
    margin-bottom: 5px;
}

.follower-count {
    font-size: 0.85rem;
    color: #b8c5d1;
}

/* 장르 */
.genre-container {
    padding: 0 15px 30px;
}

.genre-tags-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.genre-tag-box {
    position: relative;
    height: 120px;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
}

.genre-tag-box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.genre-tag-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    padding: 15px;
    color: white;
    font-weight: 600;
    text-align: center;
}

/* 전체보기 버튼 */
.view-all-btn {
    display: block;
    width: fit-content;
    margin: 20px auto;
    padding: 12px 30px;
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: 25px;
    color: #ffffff;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.view-all-btn:hover {
    background: rgba(139, 92, 246, 0.3);
    transform: translateY(-2px);
}

/* 이벤트 */
.event_list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
    padding: 0 15px;
    margin-bottom: 30px;
}

.event_list img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 12px;
}

/* 푸터 */
.footer {
    background: rgba(139, 92, 246, 0.1);
    border-top: 1px solid rgba(139, 92, 246, 0.2);
    padding: 20px;
    text-align: center;
    font-size: 0.85rem;
    color: #b8c5d1;
}

.company-name {
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 10px;
}

.info-line {
    margin: 5px 0;
}

.glt2-follow-btn {
    padding: 12px 24px;
    background: rgba(139, 92, 246, 0.2);
    border: 1px solid rgba(139, 92, 246, 0.5);
    border-radius: 25px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.glt2-follow-btn:hover {
    background: rgba(139, 92, 246, 0.4);
    transform: translateY(-2px);
}

.glt2-follow-btn.following {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border-color: transparent;
}

@media (max-width: 576px) {
    .section-title {
        font-size: 1.5rem;
        margin-left: 15px;
    }

    .llm-card {
        flex: 0 0 170px;
    }

    .user-card {
        flex: 0 0 130px;
    }

    .genre-tags-container {
        grid-template-columns: 1fr;
    }

    .nav-button {
        padding: 10px 16px;
        font-size: 0.85rem;
    }
}
</style>
<body>



    <!-- 헤더 -->
    <header>
        {% if not user.is_authenticated %}
            {% include "common/notLoginHeader.html" %}
        {% else %}
            {% include "common/loginHeader.html" %}
        {% endif %}
    </header>

    <!-- 토글 버튼 -->
    <div id="sidebar-toggle" class="collapsed">&#9650;</div>

    <!-- 토글 컨텐츠 -->
    <div id="sidebar-content" class="collapsed">
        <div class="languageSelect">
            <form action="{% url 'home:set_language' %}" method="post">
                {% csrf_token %}
                <label for="language-select">{% trans "언어 선택" %}</label>
                <select id="language-select" name="language">
                    {% for code, name in languages %}
                        <option value="{{ code }}" {% if code == LANGUAGE_CODE %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>
                <input type="hidden" name="next" value="{{ request.get_full_path }}" />
                <button type="submit">Change Language</button>
            </form>
        </div>
        <div class="helpdesk">
            <a href="{% url 'helpdesk:Faq' %}" class="faq">FAQ</a>
            <a href="{% url 'helpdesk:request' %}" class="request">{% trans '요청하기' %}</a>
            <a href="{% url 'helpdesk:notice' %}" class="notice">{% trans '공지사항' %}</a>
            <a href="{% url 'helpdesk:prompt_share' %}" class="notice">{% trans '프롬프트 공유하기' %}</a>
        </div>
    </div>

    <main style="background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%); margin-top: -40px; padding-bottom: 40px;">

                    {% for news in news_list %}

                    {% endfor %}

        <!-- 메인 네비게이션 -->
                 {% if user.is_authenticated %}
        <nav class="main-nav" role="navigation" aria-label="{% trans '주요 메뉴' %}" style="padding-top: 70px;">
            <a href="/payment/" class="nav-button">{% trans "결제하기" %}</a>
            <!-- <a href="/soon/" class="nav-button">{% trans "보이스 클로닝" %}</a>
            <a href="/soon/" class="nav-button">{% trans "보이스 만들기" %}</a> -->
            <a href="/voice_all/" class="nav-button">{% trans "보이스 선택하기" %}</a>
            <a href="/image/" class="nav-button">{% trans "이미지 만들기" %}</a>
            <a href="/invite/" class="nav-button">{% trans "친구초대하기" %}</a>
            <a href="/customer_ai/ai_name" class="nav-button special">{% trans "AI 만들기⊕" %}</a>
        </nav>
        {% endif %}

<!-- 뉴스 섹션 HTML (Django 템플릿) -->
<div class="news-section">
    
    <!-- 메인 뉴스 슬라이더 -->
    <div class="news-container"  style="margin-top: 20px;">
        <div class="news-slider" id="newsSlider">
            {% for news in news_list %}
                <div class="news-slide">
                    {% if news.news_img %}
                        <img src="{{ news.news_img.url }}" alt="{{ news.title }}" loading="lazy">
                    {% else %}
                        <div class="news-placeholder">
                            <i class="icon-news"></i>
                        </div>
                    {% endif %}
                    
                    <div class="news-content">
                        <h3 class="news-title">{{ news.title }}</h3>
                        {% if news.news_description %}
                            <p class="news-description">{{ news.news_description }}</p>
                        {% endif %}
                        
                        {% if news.link %}
                            <a href="{{ news.link }}" class="news-link" target="_blank">
                                <span>{% trans "자세히 보기" %}</span>
                                <i class="icon-arrow-right"></i>
                            </a>
                        {% endif %}
                    </div>
                </div>
            {% empty %}
                <div class="news-slide">
                    <div class="news-placeholder">
                        <p>{% trans "등록된 뉴스가 없습니다." %}</p>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        {% if news_list|length > 1 %}
            <button class="nav-btn prev" onclick="slideNews(-1)">‹</button>
            <button class="nav-btn next" onclick="slideNews(1)">›</button>
            
            <div class="indicators">
                {% for news in news_list %}
                    <div class="indicator {% if forloop.first %}active{% endif %}" 
                         onclick="goToSlide({{ forloop.counter0 }})"></div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>




<!-- HTML 구조 변경 -->
<div class="main-content">
    <div class="llm-container2">
        <h2 class="section-title">{% trans '추천' %}</h2>
        
        <!-- 첫 번째 줄 -->
        <div class="llm-row">
            <div class="llm-cards-horizontal">
                {% for item in llm_list|slice:":10" %}
                <div class="llm-card" onclick="openModal({{ item.id }})">
                    <div class="llm-card-body">
                        <div class="llm-image-container">
                            {% if item.llm_image %}
                                <img src="{{ item.llm_image.url }}" alt="{{ item.name }}" loading="lazy">
                            {% else %}
                                <img src="https://via.placeholder.com/220x120/F359DE/FFFFFF?text=No+Image" alt="기본 이미지" loading="lazy">
                            {% endif %}
                        </div>
                        <div class="llm-name">{{ item.title }}</div>
                        <div class="genre-tags">
                            {% for genre in item.genres.all %}
                                <div class="genre-tag" style="background-color: {{ genre.color }};">{{ genre.name }}</div>
                            {% empty %}
                                <div class="genre-tag" style="background-color: #999;">장르 없음</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- 두 번째 줄 -->
        <div class="llm-row">
            <div class="llm-cards-horizontal">
                {% for item in llm_list|slice:"10:20" %}
                <div class="llm-card" onclick="openModal({{ item.id }})">
                    <div class="llm-card-body">
                        <div class="llm-image-container">
                            {% if item.llm_image %}
                                <img src="{{ item.llm_image.url }}" alt="{{ item.name }}" loading="lazy">
                            {% else %}
                                <img src="https://via.placeholder.com/220x120/F359DE/FFFFFF?text=No+Image" alt="기본 이미지" loading="lazy">
                            {% endif %}
                        </div>
                        <div class="llm-name">{{ item.title }}</div>
                        <div class="genre-tags">
                            {% for genre in item.genres.all %}
                                <div class="genre-tag" style="background-color: {{ genre.color }};">{{ genre.name }}</div>
                            {% empty %}
                                <div class="genre-tag" style="background-color: #999;">장르 없음</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- 세 번째 줄 -->
        <div class="llm-row">
            <div class="llm-cards-horizontal">
                {% for item in llm_list|slice:"20:30" %}
                <div class="llm-card" onclick="openModal({{ item.id }})">
                    <div class="llm-card-body">
                        <div class="llm-image-container">
                            {% if item.llm_image %}
                                <img src="{{ item.llm_image.url }}" alt="{{ item.name }}" loading="lazy">
                            {% else %}
                                <img src="https://via.placeholder.com/220x120/F359DE/FFFFFF?text=No+Image" alt="기본 이미지" loading="lazy">
                            {% endif %}
                        </div>
                        <div class="llm-name">{{ item.title }}</div>
                        <div class="genre-tags">
                            {% for genre in item.genres.all %}
                                <div class="genre-tag" style="background-color: {{ genre.color }};">{{ genre.name }}</div>
                            {% empty %}
                                <div class="genre-tag" style="background-color: #999;">장르 없음</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

                <!-- 세 번째 줄 -->
        <div class="llm-row">
            <div class="llm-cards-horizontal">
                {% for item in llm_list|slice:"30:40" %}
                <div class="llm-card" onclick="openModal({{ item.id }})">
                    <div class="llm-card-body">
                        <div class="llm-image-container">
                            {% if item.llm_image %}
                                <img src="{{ item.llm_image.url }}" alt="{{ item.name }}" loading="lazy">
                            {% else %}
                                <img src="https://via.placeholder.com/220x120/F359DE/FFFFFF?text=No+Image" alt="기본 이미지" loading="lazy">
                            {% endif %}
                        </div>
                        <div class="llm-name">{{ item.title }}</div>
                        <div class="genre-tags">
                            {% for genre in item.genres.all %}
                                <div class="genre-tag" style="background-color: {{ genre.color }};">{{ genre.name }}</div>
                            {% empty %}
                                <div class="genre-tag" style="background-color: #999;">장르 없음</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <a href="{% url 'home:llm_section' %}" class="view-all-btn">{% trans '전체 보기' %}</a>
    </div>
</div>










<!-- 인기있는 유저 -->
<div class="popular-users-section">
    <h2 class="section-title">{% trans '인기 있는 팔로워' %}</h2>
    <div class="users-list">
        {% for user in total_follow_count %}
        <div class="user-card" onclick="openUserModal({{ user.id }})" style="cursor: pointer;">
            
            <div class="user-avatar">
                {% if user.user_image %}
                    <img src="{{ user.user_image.url }}" alt="{{ user.username }}" loading="lazy">
                {% else %}
                    <img src="{% static 'images/default_user.png' %}" alt="" loading="lazy">
                {% endif %}
            </div>
            <div class="user-info">
                <h3 class="username">{{ user.nickname }}</h3>
                <span class="follower-count">{{ user.follower_count }} {% trans "팔로워" %}</span>
            </div>
        </div>
        {% empty %}
        <div class="empty-message">
            <p>{% trans "아직 팔로우한 유저가 없습니다." %}</p>
        </div>
        {% endfor %}
    </div>
</div>





<script>
    const LANGUAGE_CODE = "{{ LANGUAGE_CODE }}"
    const USER_ID = "{{ user.id }}";
    const LLM_id = "{{ item.id }}"
</script>

<script src="{% static 'js/home/llm_section.js' %}"></script>


    <!-- 이벤트 -->
<div class="popular-users-section">
    <h2 class="section-title">{% trans '이벤트' %}</h2>
    <div class="event_list">
        {% for gift in gift_list %}
                {% if gift.gift_img %}
                    <img src="{{  gift.gift_img.url }}" alt="" loading="lazy">
                {% else %}
                    <img src="{% static 'images/default_user.png' %}" alt="" loading="lazy">
                {% endif %}
        {% endfor %}
    </div>
</div>
  <!-- 일반 voice 목록 -->
<!-- <div class="cv-main-content">
    <h2 class="cv-section-title">{% trans 'user 가 추천하는 목소리' %}</h2>
    
    <div class="cv-container">
        <div class="cv-scroll">
            {% for voice in voice_list|slice:":7" %}
                <div class="voice-wrapper">
                    <div class="cv-header">
                        <div class="voice-character" onclick="toggleAudio(this)" data-voice-id="{{ voice.id }}">

                            <div class="cv-play-overlay">
                                <div class="cv-play-icon"></div>
                            </div>
                        </div>
                        <div class="cv-info">
                            <p>{{ voice.voice_name }}</p>
                            <input type="hidden" value="{{ voice.voice_id }}">
                        </div>
                    </div>
                    <div class="voice-progress" onclick="seekAudio(event, this)">
                        <div class="cv-progress-bar"></div>
                    </div>
                    <button class="copy-id-btn" onclick="copyVoiceId(this)" title="Voice ID 복사">{% trans "복사" %}</button>
                    {% if voice.sample_url %}
                        <audio class="voice-audio" controls>
                            <source src="{{ voice.sample_url }}" type="audio/mpeg">
                        </audio>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
                    <a href="{% url 'home:voice_all' %}" class="view-all-btn">{% trans '전체 보기' %}</a>

</div> -->


        <!-- 장르 섹션 -->
        <div class="main-content">
            <div class="genre-container" style="padding: 20px;">
                <h2 class="section-title">{% trans "장르" %}</h2>
                <div class="genre-tags-container">
                    {% for genre in genre_list|slice:":8" %}
                    <a href="{% url 'home:genres_detail' genre.id %}">

                        <div class="genre-tag-box">
                            {% if genre.genre_image %}
                                <img src="{{ genre.genre_image.url }}" alt="{{ genre.name }}" loading="lazy">
                            {% else %}
                                <img src="{% static 'images/default_genre.png' %}" alt="{{ genre.name }}" loading="lazy">
                            {% endif %}
                            <div class="genre-tag-overlay">{{ genre.name }}</div>
                        </div>
                        </a>
                    {% endfor %}
                </div>
                <a href="{% url 'home:genre_all' %}" class="view-all-btn">{% trans '전체 보기' %}</a>
            </div>
        </div>


   <!-- ✅ 광고 위치 -->
    <div class="ad-section" style="margin: 40px auto; text-align:center;">


        <!-- 구글 애드센스 광고 코드 -->
        <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-client="ca-pub-3542211779359374"
        data-ad-slot="1234567890"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
        
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="company-name">갈라테이아</div>
            <div class="info-line">사업자번호: 309-04-66659 | 대표자명: 김충희 | 연락처: 010-3161-5706 |email: kimc570612@gmail.com</div>
            <div class="info-line">주소:경기도 안산시 단원구 광덕1로 80 </div>
        </div>
    </footer>
<script>

    function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // 쿠키 이름 확인
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}




  

        // 사이드바 토글
    const toggleBtn = document.getElementById('sidebar-toggle');
    const sidebarContent = document.getElementById('sidebar-content');

    toggleBtn.addEventListener('click', () => {
        const collapsed = sidebarContent.classList.contains('collapsed');
        sidebarContent.classList.toggle('collapsed');
        toggleBtn.classList.toggle('collapsed');
        toggleBtn.classList.toggle('expanded');
        toggleBtn.innerHTML = collapsed ? '&#9660;' : '&#9650;'; // ▼ / ▲
    });


  // 가로 스크롤 개선 스크립트
document.addEventListener('DOMContentLoaded', function() {
    
    // 모든 가로 스크롤 컨테이너
    const horizontalContainers = document.querySelectorAll(
        '.cv-scroll, .genre-tags-container, .character-cards-container, .llm-cards-container'
    );
    
    horizontalContainers.forEach(container => {
        // 마우스 휠로 가로 스크롤
        container.addEventListener('wheel', function(e) {
            if (e.deltaY !== 0) {
                e.preventDefault();
                container.scrollLeft += e.deltaY;
            }
        });
        
        // 드래그 스크롤 (데스크톱)
        let isDown = false;
        let startX;
        let scrollLeft;
        
        container.addEventListener('mousedown', function(e) {
            isDown = true;
            container.style.cursor = 'grabbing';
            startX = e.pageX - container.offsetLeft;
            scrollLeft = container.scrollLeft;
        });
        
        container.addEventListener('mouseleave', function() {
            isDown = false;
            container.style.cursor = 'grab';
        });
        
        container.addEventListener('mouseup', function() {
            isDown = false;
            container.style.cursor = 'grab';
        });
        
        container.addEventListener('mousemove', function(e) {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - container.offsetLeft;
            const walk = (x - startX) * 2;
            container.scrollLeft = scrollLeft - walk;
        });
        
        // 기본 커서 스타일
        container.style.cursor = 'grab';
    });
    
    // 스크롤 인디케이터 생성 (옵션)
    function createScrollIndicator(container) {
        const indicator = document.createElement('div');
        indicator.className = 'scroll-indicator';
        indicator.style.cssText = `
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            height: 2px;
            background: rgba(139,92,246,0.3);
            border-radius: 1px;
            width: 60px;
        `;
        
        const thumb = document.createElement('div');
        thumb.style.cssText = `
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #06b6d4);
            border-radius: 1px;
            transition: width 0.2s ease;
            width: 30%;
        `;
        
        indicator.appendChild(thumb);
        
        // 상대적 위치를 위해 부모에 relative 추가
        const parent = container.parentElement;
        if (parent && getComputedStyle(parent).position === 'static') {
            parent.style.position = 'relative';
        }
        parent.appendChild(indicator);
        
        // 스크롤 이벤트로 인디케이터 업데이트
        container.addEventListener('scroll', function() {
            const scrollPercent = (container.scrollLeft / (container.scrollWidth - container.clientWidth)) * 100;
            thumb.style.width = Math.max(10, Math.min(90, scrollPercent)) + '%';
        });
    }
    
    // 키보드 네비게이션
    document.addEventListener('keydown', function(e) {
        const focusedContainer = document.querySelector('.cv-scroll:hover, .genre-tags-container:hover, .character-cards-container:hover, .llm-cards-container:hover');
        
        if (focusedContainer) {
            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                focusedContainer.scrollLeft -= 200;
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                focusedContainer.scrollLeft += 200;
            }
        }
    });
    
    // 터치 디바이스에서 스크롤 개선
    if ('ontouchstart' in window) {
        horizontalContainers.forEach(container => {
            container.style.scrollBehavior = 'smooth';
            container.style.WebkitOverflowScrolling = 'touch';
        });
    }
    
    // 접근성: 포커스 시 자동 스크롤
    horizontalContainers.forEach(container => {
        const items = container.children;
        Array.from(items).forEach(item => {
            item.addEventListener('focus', function() {
                const containerRect = container.getBoundingClientRect();
                const itemRect = item.getBoundingClientRect();
                
                if (itemRect.left < containerRect.left) {
                    container.scrollLeft -= (containerRect.left - itemRect.left + 20);
                } else if (itemRect.right > containerRect.right) {
                    container.scrollLeft += (itemRect.right - containerRect.right + 20);
                }
            });
        });
    });
});

// 스크롤 성능 최적화
const optimizeScroll = () => {
    const containers = document.querySelectorAll('.cv-scroll, .genre-tags-container, .character-cards-container, .llm-cards-container');
    
    containers.forEach(container => {
        container.style.scrollBehavior = 'smooth';
        
        // Intersection Observer로 뷰포트 밖 요소 최적화
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.transform = 'none';
                } else {
                    entry.target.style.transform = 'translateZ(0)'; // 하드웨어 가속
                }
            });
        }, {
            root: container,
            rootMargin: '50px'
        });
        
        Array.from(container.children).forEach(child => {
            observer.observe(child);
        });
    });
};

// 페이지 로드 후 최적화 실행
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', optimizeScroll);
} else {
    optimizeScroll();
}

let currentSlide = 0;
const slides = document.querySelectorAll('.news-slide');
const indicators = document.querySelectorAll('.indicator');
const slider = document.getElementById('newsSlider');

function slideNews(direction) {
    if (slides.length <= 1) return;
    
    currentSlide += direction;
    
    if (currentSlide >= slides.length) {
        currentSlide = 0;
    } else if (currentSlide < 0) {
        currentSlide = slides.length - 1;
    }
    
    updateSlider();
}

function goToSlide(index) {
    if (slides.length <= 1) return;
    
    currentSlide = index;
    updateSlider();
}

function updateSlider() {
    if (!slider) return;
    
    slider.style.transform = `translateX(-${currentSlide * 100}%)`;
    
    indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentSlide);
    });
}

// 자동 슬라이드 (5초마다)
if (slides.length > 1) {
    setInterval(() => {
        slideNews(1);
    }, 5000);
}

// 키보드 네비게이션
document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
        slideNews(-1);
    } else if (e.key === 'ArrowRight') {
        slideNews(1);
    }
});

// 터치 스와이프 지원 (모바일)
let startX = 0;
let endX = 0;

slider?.addEventListener('touchstart', (e) => {
    startX = e.changedTouches[0].screenX;
});

slider?.addEventListener('touchend', (e) => {
    endX = e.changedTouches[0].screenX;
    handleSwipe();
});

function handleSwipe() {
    const threshold = 50; // 최소 스와이프 거리
    const diff = startX - endX;
    
    if (Math.abs(diff) > threshold) {
        if (diff > 0) {
            slideNews(1); // 왼쪽으로 스와이프 = 다음 슬라이드
        } else {
            slideNews(-1); // 오른쪽으로 스와이프 = 이전 슬라이드
        }
    }
}


// like btn
document.addEventListener('click', (e)=>{
    const likeBtn = e.target.closest('.glt2-like-btn');
    if (!likeBtn) return;

    const userId = likeBtn.dataset.id;

    fetch("{% url 'home:like_toggle' %}", {
        method: "POST",
        headers: {
            "X-CSRFToken": "{{ csrf_token }}",
            "Content-Type": "application/x-www-form-urlencoded"
        },
        body: `llm_id=${userId}`
    })
    .then(response => response.json())
    .then(data=>{
        if (data.status === 'like'){
            likeBtn.innerHTML  = '<span class="heart-filled"></span>';
        } else if(data.status === 'unlike'){
            likeBtn.innerHTML  = '<span class="heart-empty"></span>';
        } else{
            alert(data.message)
        }
 

            


    })
    .catch(err => console.error('{% trans "좋아요 토글 오류:" %}', err))
})

    // 카드 클릭 시 모달 열기
    document.querySelectorAll('.glt2-card').forEach(card => {
        card.addEventListener('click', (e) => {
            // 버튼 클릭이면 모달 열지 않음
            if (e.target.closest('.glt2-follow-btn') || e.target.closest('.glt2-like-btn') || e.target.closest('.glt2-chat-btn')) return;

            // 카드 내용 모달로 복사
            modalContent.innerHTML = card.innerHTML;
            modalOverlay.style.display = 'flex';
        });
    });

document.addEventListener("click", function(e) {
    if (e.target.classList.contains("share-btn")) {
        const link = e.target.getAttribute("data-link");
        navigator.clipboard.writeText(link).then(() => {
            alert("{% trans '링크가 복사되었습니다!' %}");
        });
    }
});

    // 팔로우 토글
    document.addEventListener('click', (e) => {
        const followBtn = e.target.closest('.glt2-follow-btn');
        if (!followBtn) return;

        const userId = followBtn.dataset.id;
        if (!userId) return;

        fetch("{% url 'home:toggle_follow' %}", {
            method: "POST",
            headers: {
                "X-CSRFToken": getCookie('csrftoken'),
                "Content-Type": "application/x-www-form-urlencoded"
            },
            body: `user_id=${encodeURIComponent(userId)}`
        })
        .then(res => res.json())
        .then(data => {
            if (data.status === 'follow') {
                followBtn.textContent = '{% trans "Following" %}';
                followBtn.classList.add('following');
            } else if (data.status === 'unfollow') {
                followBtn.textContent = '{% trans "Follow" %}';
                followBtn.classList.remove('following');
            } else {
                alert(data.message);
            }
        })
        .catch(err => console.error('{% trans "팔로우 토글 오류:" %}', err));
    });

</script>



<footer>

</footer>
    
</body>
</html>