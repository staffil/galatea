<!-- 댓글 작성 -->
<form method="post" action="{% url 'home:comment_create' item.id %}">
    {% csrf_token %}
    <textarea name="content" rows="3" placeholder="댓글을 입력하세요"></textarea>
    <button type="submit">댓글 등록</button>
</form>

<!-- 댓글 리스트 -->
<div class="comment-container">
{% for comment in comments %}
  <div class="comment">
    <strong>{{ comment.user }}</strong> : {{ comment.content }}
    <br><small>{{ comment.created_at }}</small>

    <!-- 답글 작성 -->
    <form method="post" class="reply-form" action="{% url 'home:comment_create' item.id %}">
      {% csrf_token %}
      <input type="hidden" name="parent_id" value="{{ comment.id }}">
      <textarea name="content" rows="2" placeholder="답글을 입력하세요"></textarea>
      <button type="submit">답글 등록</button>
    </form>

    <!-- 답글 출력 -->
    {% for reply in comment.replies.all %}
      <div class="reply">
        <strong>{{ reply.user }}</strong> : {{ reply.content }}
        <br><small>{{ reply.created_at }}</small>
      </div>
    {% endfor %}
  </div>
{% empty %}
  <p>아직 댓글이 없습니다.</p>
{% endfor %}
</div>
