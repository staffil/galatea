  <h2>🎤 Supertone 음성 합성 테스트</h2>

  <form method="post" id="tts-form">
    {% csrf_token %}
    <label for="text">📄 텍스트 입력:</label><br>
    <textarea name="text" required placeholder="여기에 한국어 텍스트를 입력하세요..."></textarea><br><br>

    <label for="style">🎭 감정 스타일:</label><br>
    <select name="style">
      <option value="neutral">Neutral</option>
      <option value="happy">Happy</option>
      <option value="sad">Sad</option>
      <option value="angry">Angry</option>
    </select><br><br>

    <button type="submit">🗣️ 합성 요청</button>
  </form>

  <div id="audio-container" style="display:none;">
    <h3>🔊 생성된 음성</h3>
    <audio controls id="audio-player"></audio>
  </div>

  <script>
    const form = document.getElementById("tts-form");
    const audioContainer = document.getElementById("audio-container");
    const audioPlayer = document.getElementById("audio-player");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = new FormData(form);
      fetch("", {
        method: "POST",
        body: formData,
      })
      .then(res => {
        if (!res.ok) throw new Error("TTS 요청 실패");
        return res.blob();
      })
      .then(blob => {
        const url = URL.createObjectURL(blob);
        audioPlayer.src = url;
        audioContainer.style.display = "block";
        audioPlayer.play();
      })
      .catch(err => {
        alert("에러 발생: " + err.message);
      });
    });
  </script>
</body>
</html>