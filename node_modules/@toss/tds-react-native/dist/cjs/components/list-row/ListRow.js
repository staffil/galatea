"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListRow=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../core/index.js"),index_js_2=require("../../interactions/animated/index.js"),index_js_3=require("../../interactions/pressable-effect/index.js"),ListRowDisabled_js_1=require("./ListRowDisabled.js"),ListRowRightArrow_js_1=require("./ListRowRightArrow.js"),BlinkEffect_js_1=require("./animation/BlinkEffect.js"),ShineEffect_js_1=require("./animation/ShineEffect.js"),sToMs_js_1=require("./animation/sToMs.js"),useBlinkAnimation_js_1=require("./animation/useBlinkAnimation.js"),useShineAnimation_js_1=require("./animation/useShineAnimation.js"),a11y_js_1=require("../../utils/a11y.js");exports.ListRow=(0,react_1.forwardRef)(function({left:a,right:t,contents:c,withArrow:x=!1,horizontalPadding:R,verticalPadding:y=24,leftAlignment:g="center",rightAlignment:w="center",onPress:l,containerStyle:_,style:S,preferReducedMotion:L=!1,disabled:n,disabledStyle:u="type1",...k},q){const{colorPreference:v}=(0,index_js_1.useColorPreference)(),V=(0,index_js_1.useAdaptive)(),p=useShouldAlignVertical(),A=(0,react_1.useMemo)(()=>{switch(y){case"extraSmall":case 8:return 8;case"small":case 16:return 16;case"medium":case 24:return 24;case"large":case 32:return 32}},[y]),[E,d]=(0,react_1.useState)({width:0,height:0}),s=(0,useBlinkAnimation_js_1.useBlinkAnimation)({containerSize:E}),r=(0,useShineAnimation_js_1.useShineAnimation)({containerSize:E}),o=(0,react_1.useRef)(null),T=(0,react_1.useCallback)((e=1.5)=>{s.start(),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{s.exit(),o.current=null},(0,sToMs_js_1.sToMs)(e))},[s]);(0,react_1.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]);const b=(0,react_1.useCallback)((e=1)=>{v==="light"?r.light.start(e):r.dark.start(e)},[v,r]);(0,react_1.useImperativeHandle)(q,()=>({blink:T,shine:b}));const f=(0,react_1.useMemo)(()=>(0,jsx_runtime_1.jsxs)(index_js_2.Animated.View,{pointerEvents:n?"none":void 0,style:[{paddingVertical:A,position:"relative"},styles.container,_,s.container],children:[(0,jsx_runtime_1.jsx)(BlinkEffect_js_1.BlinkEffect,{blinkAnimation:s}),a!=null?(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.left,g==="top"?{alignSelf:"flex-start"}:void 0],children:a}):void 0,p?(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:[styles.content],children:[c,t!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.rightVertical],children:t})]}):(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[c!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:styles.content,children:c}),t!==void 0&&(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.right,w==="top"?{alignItems:"flex-start"}:void 0],children:t})]}),x&&(0,jsx_runtime_1.jsx)(ListRowRightArrow_js_1.ListRowRightArrow,{})]}),[n,A,_,s,a,g,p,c,t,w,x]),h=(0,react_1.useMemo)(()=>(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[n&&u==="type1"?(0,jsx_runtime_1.jsx)(ListRowDisabled_js_1.ListRowDisabled.Style1,{}):void 0,n&&u==="type2"?(0,jsx_runtime_1.jsx)(ListRowDisabled_js_1.ListRowDisabled.Style2,{}):void 0]}),[n,u]),m=[S,R===0?{marginHorizontal:-24}:void 0,{overflow:"hidden"}],j=(0,a11y_js_1.generateA11yRestProps)(k,{role:l==null?void 0:"button",disabled:n});return L?l==null?(0,jsx_runtime_1.jsxs)(react_native_1.View,{...j,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},style:m,children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_js_1.ShineEffect,{shineAnimation:r}),h]}):(0,jsx_runtime_1.jsx)(react_native_1.TouchableHighlight,{...j,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},onPress:n?void 0:l,underlayColor:V.greyOpacity100,style:m,children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_js_1.ShineEffect,{shineAnimation:r}),h]})}):(0,jsx_runtime_1.jsxs)(index_js_3.PressableEffect,{...j,onLayout:e=>{d({width:e.nativeEvent.layout.width,height:e.nativeEvent.layout.height})},underlay:(0,jsx_runtime_1.jsx)(index_js_3.PressableEffect.Underlay,{style:styles.underlay}),style:m,onPress:n?void 0:l,children:[f,(0,jsx_runtime_1.jsx)(ShineEffect_js_1.ShineEffect,{shineAnimation:r}),h]})});const useShouldAlignVertical=()=>{const{typographyLevel:i}=(0,index_js_1.useTypographyTheme)(),{width:a}=(0,react_native_1.useWindowDimensions)(),t=react_native_1.Platform.OS==="android";return a>=560?t?i>=200:i?.startsWith("A11y")&&i!=="A11y_Medium":t?i>=135:i?.startsWith("A11y")},styles=react_native_1.StyleSheet.create({underlay:{marginHorizontal:6,marginVertical:4,borderRadius:12},container:{flexDirection:"row",alignItems:"center",paddingHorizontal:24},content:{flex:1,justifyContent:"center"},left:{flexDirection:"row"},right:{marginLeft:16,height:"100%",flexDirection:"row",alignItems:"center",maxWidth:"80%",justifyContent:"flex-end"},rightVertical:{maxWidth:"100%",width:"100%",marginLeft:0}});
