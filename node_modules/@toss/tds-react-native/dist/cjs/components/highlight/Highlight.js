"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Highlight=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native"),tds_colors_1=require("@toss/tds-colors"),index_js_1=require("../../core/index.js"),HighlightUI_js_1=require("./HighlightUI.js"),index_js_2=require("./hooks/index.js"),useTimestampRef_js_1=require("./hooks/useTimestampRef.js"),mergeRefs_js_1=require("./utils/mergeRefs.js");exports.Highlight=(0,react_1.forwardRef)(function({open:s,delay:c=0,padding:e=0,paddingLeft:u=e,paddingTop:l=e,paddingRight:h=e,paddingBottom:f=e,message:_,messageColor:a=tds_colors_1.colors.white,messageXAlignment:m,messageYAlignment:j,onPress:t,onExited:g,onTargetPress:x,children:R,closeLockDuration:q=0,...r},v){const d={padding:e,paddingLeft:u,paddingTop:l,paddingRight:h,paddingBottom:f,message:_,messageColor:a,messageXAlignment:m,messageYAlignment:j,onPress:t,onTargetPress:x,...r},i=(0,index_js_1.useOverlay)(),o=(0,index_js_2.useTimeout)(),n=(0,react_1.useRef)(null),w=(0,useTimestampRef_js_1.useTimestampRef)({active:s});return(0,react_1.useEffect)(()=>{if(s)return o.set(()=>{n.current?.measureInWindow((p,H,T,I)=>{i.open(({isOpen:U,close:y,exit:P})=>(0,jsx_runtime_1.jsx)(HighlightUI_js_1.HighlightUI,{...d,x:p,y:H,width:T,height:I,open:U,onPress:()=>{new Date().getTime()-w.current>q*1e3&&(t?.(),y())},onExited:()=>{g?.(),P()}}))})},c*1e3),o.clear;i.close()},[s]),(0,jsx_runtime_1.jsx)(react_native_1.View,{...r,children:(0,jsx_runtime_1.jsx)(react_native_1.View,{ref:(0,mergeRefs_js_1.mergeRefs)(v,n),removeClippedSubviews:!1,children:R})})});
