"use strict";var __importDefault=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimatedCheckboxGraphic=AnimatedCheckboxGraphic;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_colors_1=require("@toss/tds-colors"),hex_to_rgba_1=__importDefault(require("hex-to-rgba")),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../../../core/index.js"),index_js_2=require("../../../../interactions/pressable-effect/index.js"),const_js_1=require("../../const.js"),paths_js_1=require("./paths.js"),styles_js_1=require("./styles.js");function AnimatedCheckboxGraphic({checked:t,size:o,children:m,style:_,onTouchStart:b,onTouchEnd:C,onTouchCancel:x,onPress:j,...A}){const[s,n]=(0,react_1.useState)(t?"on":"off"),l=(0,react_1.useMemo)(()=>o*20/24,[o]),a=(0,index_js_1.useAdaptive)(),u=(0,react_1.useMemo)(()=>({background:(0,hex_to_rgba_1.default)(a.background??tds_colors_1.colors.background),grey200:(0,hex_to_rgba_1.default)(a.grey200??tds_colors_1.colors.grey200),blue600:(0,hex_to_rgba_1.default)(tds_colors_1.colors.blue600),blue500:(0,hex_to_rgba_1.default)(tds_colors_1.colors.blue500),white:(0,hex_to_rgba_1.default)(tds_colors_1.colors.white),transparent:(0,hex_to_rgba_1.default)(tds_colors_1.colors.grey200,0)}),[a.background,a.grey200]),{startPressInAnim:d,startPressOutAnim:p,scaleAnim:h}=(0,index_js_2.usePressAnim)(pressAnimConfig),r=(0,react_1.useMemo)(()=>{const{background:e,grey200:w,blue600:c,blue500:g,white:k,transparent:D}=u;return{check:{off:{stroke:D,strokeDashoffset:24,scale:pressAnimConfig.pressOut.scale},"off-press":{stroke:c,strokeDashoffset:16,scale:pressAnimConfig.pressIn.scale},on:{stroke:k,strokeDashoffset:0,scale:pressAnimConfig.pressOut.scale},"on-press":{stroke:k,strokeDashoffset:13.5,scale:pressAnimConfig.pressIn.scale}},backgroundCheck:{off:{opacity:1},"off-press":{opacity:1},on:{opacity:0},"on-press":{opacity:0}},outerCircle:{off:{fill:w},"off-press":{fill:c},on:{fill:g},"on-press":{fill:c}},innerCircle:{off:{fill:e,scale:1},"off-press":{fill:e,scale:1},on:{fill:g,scale:0},"on-press":{fill:c,scale:0}},innerCircleScaleOrigin\uBCF4\uC815:{off:{x:0,y:0},"off-press":{x:0,y:0},on:{x:12,y:12},"on-press":{x:12,y:12}}}},[u]),v=(0,react_1.useCallback)(()=>{n(e=>e==="on"?"on-press":"off-press"),d()},[d]),y=(0,react_1.useCallback)(()=>{n(t?e=>e==="on-press"?"on":"off":e=>e==="off-press"?"off":"on"),p()},[t,p]);(0,react_1.useEffect)(()=>{n(t?"on":"off")},[t]);const i=(0,react_1.useRef)(new react_native_1.Animated.Value(r.innerCircle[s].scale)).current;(0,react_1.useEffect)(()=>{s==="on"||s==="off"?react_native_1.Animated.spring(i,{toValue:r.innerCircle[s].scale,...const_js_1.SPRING_CONFIG,useNativeDriver:!0}).start():react_native_1.Animated.timing(i,{toValue:r.innerCircle[s].scale,duration:0,useNativeDriver:!0}).start()},[r.innerCircle,s,i]);const f=(0,react_1.useRef)(new react_native_1.Animated.Value(r.check[s].strokeDashoffset)).current;return(0,react_1.useEffect)(()=>{react_native_1.Animated.timing(f,{toValue:r.check[s].strokeDashoffset,...const_js_1.TIMING_CONFIG,useNativeDriver:!0}).start()},[r.check,s,f]),(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{onTouchStart:e=>{v(),b?.(e)},onTouchEnd:e=>{y(),C?.(e)},onTouchCancel:e=>{y(),x?.(e)},onPress:j,style:[styles_js_1.styles.container,{width:o,height:o},_],accessibilityRole:"checkbox",accessibilityState:{checked:t,disabled:!1},...A,children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(react_native_1.Animated.View,{style:[{transform:[{scale:h}]},{width:o,height:o},styles_js_1.styles.circleContainer],children:[(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[{backgroundColor:r.outerCircle[s].fill,borderRadius:o/2},styles_js_1.styles.outerCircle]}),(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[{width:l,height:l,backgroundColor:r.innerCircle[s].fill,borderRadius:l/2,transform:[{scale:i}]}]})]}),(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[{width:o,height:o},styles_js_1.styles.checkContainer],children:(0,jsx_runtime_1.jsxs)(AnimatedSvg,{viewBox:"0 0 24 24",style:{transform:[{scale:h}]},children:[(0,jsx_runtime_1.jsx)(paths_js_1.Check,{stroke:u.grey200,style:{opacity:r.backgroundCheck[s].opacity}}),(0,jsx_runtime_1.jsx)(paths_js_1.Check,{stroke:r.check[s].stroke,strokeDasharray:"24px 24px",strokeDashoffset:f})]})}),m]})})}const AnimatedSvg=react_native_1.Animated.createAnimatedComponent(react_native_svg_1.Svg),pressAnimConfig={pressIn:{scale:.9,opacity:0},pressOut:{scale:1,opacity:0}};
