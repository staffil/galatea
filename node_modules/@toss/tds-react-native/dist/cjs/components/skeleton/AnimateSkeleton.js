"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../core/index.js");function AnimateSkeleton({children:i,delay:e,withGradient:a,withShimmer:n}){const r=(0,react_1.useRef)(new react_native_1.Animated.Value(e===500?0:1)).current,t=(0,react_1.useRef)(new react_native_1.Animated.Value(n?.2:1)).current;return(0,react_1.useEffect)(()=>{const s=react_native_1.Animated.sequence([react_native_1.Animated.delay(e),react_native_1.Animated.timing(r,{toValue:1,duration:100,useNativeDriver:!0})]),o=n?react_native_1.Animated.sequence([react_native_1.Animated.delay(e),react_native_1.Animated.loop(react_native_1.Animated.sequence([react_native_1.Animated.timing(t,{toValue:1,duration:650,useNativeDriver:!0}),react_native_1.Animated.timing(t,{toValue:.2,duration:650,useNativeDriver:!0})]))]):emptyAnimation;react_native_1.Animated.parallel([s,o]).start()},[]),(0,jsx_runtime_1.jsxs)(react_native_1.Animated.View,{style:{opacity:r},children:[(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:{opacity:t},children:i}),a?(0,jsx_runtime_1.jsx)(GradientOverlay,{}):null]})}function GradientOverlay(){const e=(0,index_js_1.useAdaptive)().background??tds_colors_1.colors.background;return(0,jsx_runtime_1.jsxs)(react_native_svg_1.Svg,{height:"100%",width:"100%",style:{position:"absolute",top:0,left:0},children:[(0,jsx_runtime_1.jsx)(react_native_svg_1.Defs,{children:(0,jsx_runtime_1.jsxs)(react_native_svg_1.LinearGradient,{id:GRADIENT_ID,gradientTransform:"rotate(90)",children:[(0,jsx_runtime_1.jsx)(react_native_svg_1.Stop,{offset:"5%",stopColor:e,stopOpacity:0}),(0,jsx_runtime_1.jsx)(react_native_svg_1.Stop,{offset:"95%",stopColor:e})]})}),(0,jsx_runtime_1.jsx)(react_native_svg_1.Rect,{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${GRADIENT_ID})`})]})}const emptyAnimation=react_native_1.Animated.delay(0),GRADIENT_ID="tds-rn-animate-skeleton-gradient";exports.default=AnimateSkeleton;
