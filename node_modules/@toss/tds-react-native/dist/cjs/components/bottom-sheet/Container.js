"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BottomSheetContainer=BottomSheetContainer;const jsx_runtime_1=require("react/jsx-runtime"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../core/index.js"),index_js_2=require("../../utils/index.js"),DragAnimation_js_1=require("./DragAnimation.js"),usePreservedCallback_js_1=require("./utils/usePreservedCallback.js"),defaultSafeAreaBottom=10,noop=()=>{};function BottomSheetContainer({open:t,children:u,onDragFinished:d,onDragToClose:l,onDraggedDown:g,onDraggedMiddle:h,onDraggedUp:m,onExited:f,style:v,unstable_disableDragging:b=!1}){const r=(0,react_native_1.useWindowDimensions)(),_=(0,index_js_1.useAdaptive)(),a=(0,usePreservedCallback_js_1.usePreservedCallback)(f??noop),y=(0,react_1.useRef)(0),s=(0,react_1.useRef)(new react_native_1.Animated.Value(r.height)).current,n=(0,index_js_2.useSafeAreaBottom)()||defaultSafeAreaBottom,{typographyLevel:c}=(0,index_js_1.useTypographyTheme)(),p=react_native_1.Platform.OS==="android"?c>150:c?.startsWith("A11y"),S=r.height*(p?.9:.7),e=(0,react_1.useCallback)(({moveTo:o})=>react_native_1.Animated.spring(s,{toValue:o,useNativeDriver:!0,...tds_easings_1.spring.quick}),[s]);return(0,react_1.useEffect)(()=>{if(t)return e({moveTo:-n}).start(),()=>{e({moveTo:r.height}).start(()=>{a?.()})}},[e,r.height,a,t,n]),(0,react_1.useEffect)(()=>{if(!t||react_native_1.Platform.OS!=="ios")return;const o=react_native_1.Keyboard.addListener("keyboardWillShow",j=>{const w=j.endCoordinates.height;e({moveTo:-(defaultSafeAreaBottom+w)}).start()}),i=react_native_1.Keyboard.addListener("keyboardWillHide",()=>{e({moveTo:-n}).start()});return()=>{o.remove(),i.remove()}},[e,n,t]),(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[styles.wrapper,{transform:[{translateY:s}]}],children:(0,jsx_runtime_1.jsx)(DragAnimation_js_1.BottomSheetDragAnimation,{onDraggedUp:m,onDraggedMiddle:h,onDraggedDown:g,onDragToClose:l,onDragFinished:d,unstable_disableDragging:b,style:[styles.container,{backgroundColor:_.layeredBackground,maxHeight:S,width:r.width-20},v],onLayout:o=>{const i=o.nativeEvent.layout.height;y.current=i,t||s.setValue(i)},children:u})})}const styles=react_native_1.StyleSheet.create({wrapper:{position:"absolute",bottom:0},container:{bottom:0,borderRadius:28,left:10}});
