"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BottomSheetRoot=BottomSheetRoot;const jsx_runtime_1=require("react/jsx-runtime"),react_native_gesture_handler_1=require("@granite-js/native/react-native-gesture-handler"),react_1=require("react"),react_native_1=require("react-native"),HideAccessibility_js_1=require("../../core/contexts/HideAccessibility.js"),index_js_1=require("../../core/index.js"),const_js_1=require("./const.js"),Container_js_1=require("./Container.js"),Dimmer_js_1=require("./Dimmer.js"),Handle_js_1=require("./Handle.js"),HeaderContainer_js_1=require("./HeaderContainer.js"),RenderingAnimation_js_1=require("./utils/RenderingAnimation.js");function BottomSheetRoot({open:e,header:t,headerDescription:n,cta:m,disableDimmer:j=!1,children:_,onDimmerClick:g,onClose:c,onExited:h,style:x,wrapper:y=react_native_gesture_handler_1.ScrollView,wrapperProps:b,a11yIncludeHeaderInScroll:C=!0,unstable_disableDragging:S=!1}){const i=(0,HideAccessibility_js_1.useHideAccessibility)(),r=(0,react_1.useRef)(null),s=(0,react_1.useCallback)(()=>{react_native_1.Keyboard.dismiss(),c?.()},[c]),D=(0,react_1.useCallback)(()=>{r.current?.darken()},[]),f=(0,react_1.useCallback)(()=>{r.current?.lighten(.5)},[]),l=(0,react_1.useCallback)(()=>{r.current?.reset()},[]),q=t!=null?30:0,A=(0,react_1.useMemo)(()=>[t,n].filter(o=>o!=null).length*30,[t,n]),a=(0,index_js_1.useFontScaleCondition)(const_js_1.a11yCondition.root)&&C,u=t!=null||n!=null?(0,jsx_runtime_1.jsxs)(HeaderContainer_js_1.BottomSheetHeaderContainer,{children:[(0,jsx_runtime_1.jsx)(RenderingAnimation_js_1.BottomSheetRenderingAnimation,{children:t}),(0,jsx_runtime_1.jsx)(RenderingAnimation_js_1.BottomSheetRenderingAnimation,{delay:q,children:n})]}):null;return(0,react_1.useEffect)(()=>(e?i.activate():i.inactivate(),i.inactivate),[i,e]),(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},pointerEvents:e?"auto":"none",onAccessibilityEscape:()=>{s?.()},children:[j?null:(0,jsx_runtime_1.jsx)(Dimmer_js_1.BottomSheetDimmer,{ref:r,open:e,onPress:()=>{s?.(),g?.()}}),(0,jsx_runtime_1.jsxs)(Container_js_1.BottomSheetContainer,{open:e,onExited:h,onDraggedUp:D,onDraggedMiddle:l,onDraggedDown:f,onDragToClose:s,onDragFinished:l,style:x,unstable_disableDragging:S,children:[(0,jsx_runtime_1.jsxs)(react_native_1.View,{children:[(0,jsx_runtime_1.jsx)(Handle_js_1.BottomSheetHandle,{}),!a&&u]}),(0,jsx_runtime_1.jsxs)(y,{...b,children:[a&&u,react_1.Children.map(_,(o,d)=>(0,jsx_runtime_1.jsx)(RenderingAnimation_js_1.BottomSheetRenderingAnimation,{delay:A+d*30,children:o},d))]}),m]})]})}
