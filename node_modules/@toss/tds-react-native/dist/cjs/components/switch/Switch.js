"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const jsx_runtime_1=require("react/jsx-runtime"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../interactions/animation/index.js"),index_js_2=require("../../interactions/pressable-effect/index.js"),index_js_3=require("../../utils/index.js"),useSwitchAnimation_js_1=require("./useSwitchAnimation.js");function Switch({checked:r,defaultChecked:c=!1,disabled:e,style:a,onPress:n,onCheckedChange:i,accessibilityState:u,...l}){const[t,o]=(0,index_js_3.useControlled)({controlledValue:r,defaultValue:c}),{reduceMotionEnabled:d}=(0,index_js_3.useAccessibilityInfo)(),s=(0,react_1.useMemo)(()=>t===!0?"on":"off",[t]),{backgroundStyle:f,animatedKnobStyle:m,startSwitchOnAnimation:h,startSwitchOffAnoimation:y}=(0,useSwitchAnimation_js_1.useSwitchAnimation)({animationState:s,disabled:e}),{startPressInAnim:_,startPressOutAnim:x,scaleAnim:S}=(0,index_js_2.usePressAnim)({pressIn:{scale:.96,opacity:1},pressOut:{scale:1,opacity:1}}),{startWiggle:j,style:A}=(0,index_js_1.useWiggleAnimation)({direction:"x",type:"small"}),w=(0,react_1.useCallback)(p=>{e||(n?.(p),i?.(!t),o(!t))},[t,e,n,i,o]);return(0,react_1.useEffect)(()=>{s==="on"?h():y()},[s]),(0,jsx_runtime_1.jsx)(react_native_1.Pressable,{onPress:w,onPressIn:e?j:_,onPressOut:e?void 0:x,style:[styles.container,a],accessibilityRole:"switch",accessible:!0,accessibilityState:{checked:t,disabled:e,...u},...l,children:(0,jsx_runtime_1.jsxs)(react_native_1.Animated.View,{style:[react_native_1.Platform.OS==="ios"?{opacity:e?.3:1}:void 0,d?void 0:S,e?A:void 0],children:[(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[f,{width:WIDTH,height:HEIGHT,borderRadius:RADIUS}]}),(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[styles.knob,m]})]})})}const WIDTH=50,HEIGHT=30,RADIUS=15,styles=react_native_1.StyleSheet.create({container:{alignSelf:"flex-start"},knob:{width:16,height:16,backgroundColor:tds_colors_1.colors.white,borderRadius:8,position:"absolute",left:7,top:7}});exports.default=Switch;
