"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Indicator=Indicator;const jsx_runtime_1=require("react/jsx-runtime"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../../../core/index.js"),AlignmentContext_js_1=require("../../contexts/AlignmentContext.js"),IndicatorContext_js_1=require("../../contexts/IndicatorContext.js"),RadioContext_js_1=require("../../contexts/RadioContext.js"),useIndicatorBackground_js_1=require("../../hooks/useIndicatorBackground.js"),useIndicatorStyle_js_1=require("./useIndicatorStyle.js");function Indicator({style:s,children:a}){const{indicatorX:c,setIndicatorX:n,indicatorWidth:d,setIndicatorWidth:r}=(0,react_1.useContext)(IndicatorContext_js_1.IndicatorContext),{selectedElementLayout:t}=(0,react_1.useContext)(RadioContext_js_1.RadioContext),{indicatorStyle:u}=(0,useIndicatorStyle_js_1.useIndicatorStyle)(),{colorPreference:l}=(0,index_js_1.useColorPreference)(),{alignment:g}=(0,react_1.useContext)(AlignmentContext_js_1.AlignmentContext),x=(0,useIndicatorBackground_js_1.useIndicatorBackground)(),o=(0,react_1.useRef)(!0),i=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,e=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,h=e.interpolate({inputRange:[0,1],outputRange:[c,t?.x??0]}),_=e.interpolate({inputRange:[0,1],outputRange:[d,t?.width??0]});(0,react_1.useEffect)(()=>{t!=null&&(o.current===!0?(r(t.width),n(t.x),o.current=!1,react_native_1.Animated.spring(i,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start()):(e.setValue(0),react_native_1.Animated.spring(e,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(()=>{n(t.x),r(t.width)})))},[t,i,e,r,n]);const f={zIndex:0,top:g==="fluid"?0:void 0,height:t?.height,backgroundColor:x,width:_,opacity:i,transform:[{translateX:h}]};return(0,jsx_runtime_1.jsx)(react_native_1.Animated.View,{style:[u,f,{shadowColor:l==="light"?"rgba(0, 0, 0, 0.09)":"rgba(1, 1, 1, 0.09)",shadowOffset:{width:0,height:0},shadowOpacity:1,shadowRadius:2},s],children:a})}
