"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IconButton=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_native_svg_1=require("@granite-js/native/react-native-svg"),tds_color_utils_1=require("@toss/tds-color-utils"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../core/index.js"),index_js_2=require("../../interactions/animated/index.js"),generateHapticFeedback_js_1=require("../../native/generateHapticFeedback.js"),index_js_3=require("../icon/private/index.js"),AnimatedSvg=index_js_2.Animated.createAnimatedComponent(react_native_svg_1.Svg),AnimatedRect=index_js_2.Animated.createAnimatedComponent(react_native_svg_1.Rect),AnimatedPressable=index_js_2.Animated.createAnimatedComponent(react_native_1.Pressable),IconButtonImpl=(0,react_1.forwardRef)(function({source:d,name:g,color:n,bgColor:x,variant:t="clear",label:h,iconSize:o=24,children:A,style:_,onPressIn:p,onPressOut:m,...y},C){const f=(0,index_js_1.useAdaptive)(),c=x??f.greyOpacity100,j={borderWidth:1,borderStyle:"solid",borderColor:f.greyOpacity100},r=(0,react_1.useRef)(new index_js_2.Animated.Value(0)).current,i=(0,react_1.useRef)(new index_js_2.Animated.Value(1)).current,k=r.interpolate({inputRange:[0,1],outputRange:[c,(0,tds_color_utils_1.getNextColorValue)({color:c})]}),a=(0,react_1.useRef)(new index_js_2.Animated.Value(0)).current,R=a.interpolate({inputRange:[0,1],outputRange:["transparent",c]}),u=n!=null,s=(0,react_1.useRef)(new index_js_2.Animated.Value(0)).current,V=s.interpolate({inputRange:[0,1],outputRange:[n??"grey",n?(0,tds_color_utils_1.getNextColorValue)({color:n}):"grey"]}),b=(0,react_1.useCallback)(()=>{index_js_2.Animated.spring(i,{toValue:.9,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start(),t==="fill"?index_js_2.Animated.timing(r,{toValue:1,useNativeDriver:!1,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:500}).start():index_js_2.Animated.spring(a,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start(),u&&index_js_2.Animated.spring(s,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.rapid}).start()},[r,a,s,i,t,u]),v=(0,react_1.useCallback)(()=>{index_js_2.Animated.spring(i,{toValue:1,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(),t==="fill"?index_js_2.Animated.timing(r,{toValue:0,useNativeDriver:!1,easing:react_native_1.Easing.bezier(...tds_easings_1.bezier.out),duration:500}).start():index_js_2.Animated.spring(a,{toValue:0,useNativeDriver:!1,...tds_easings_1.spring.quick}).start(),u&&index_js_2.Animated.spring(s,{toValue:0,useNativeDriver:!1,...tds_easings_1.spring.quick}).start()},[r,a,s,i,t,u]),q=(0,react_1.useCallback)(l=>{b(),p?.(l),(0,generateHapticFeedback_js_1.generateHapticFeedback)({type:"tickWeak"})},[b,p]),w=(0,react_1.useCallback)(l=>{v(),m?.(l)},[m,v]);return(0,jsx_runtime_1.jsx)(AnimatedPressable,{ref:C,style:[{borderRadius:getRadius(o),transform:[{scale:i}],padding:getPaddingFromSize(o),backgroundColor:t==="fill"?k:R,...t==="border"?j:void 0},_],onPressIn:q,onPressOut:w,accessible:!0,accessibilityRole:"button",accessibilityLabel:h,...y,children:(0,jsx_runtime_1.jsx)(AnimatedSvg,{height:o,width:o,viewBox:"0 0 100 100",children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(react_native_svg_1.Mask,{id:"mask",x:"0",y:"0",width:"100",height:"100",children:[d!==void 0&&(0,jsx_runtime_1.jsx)(react_native_svg_1.Image,{href:d,x:"0",y:"0",height:"100",width:"100",preserveAspectRatio:"xMidYMid meet"}),g!==void 0&&(0,jsx_runtime_1.jsx)(index_js_3.SvgIcon,{name:g,x:"0",y:"0",height:"100",width:"100",preserveAspectRatio:"xMidYMid meet"})]}),(0,jsx_runtime_1.jsx)(AnimatedRect,{x:"0",y:"0",width:"100%",height:"100%",mask:"url(#mask)",fill:n&&V}),A]})})})});exports.IconButton=(0,react_1.memo)(IconButtonImpl);function getPaddingFromSize(e){return 18<=e&&e<=20?9:e/2}function getRadius(e){return e<=16?6:e<=20?8:12}
