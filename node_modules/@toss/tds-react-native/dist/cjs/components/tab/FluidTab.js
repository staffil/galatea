"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FluidTab=FluidTab;const jsx_runtime_1=require("react/jsx-runtime"),tds_easings_1=require("@toss/tds-easings"),react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../../core/index.js"),index_js_2=require("../../interactions/animated/index.js"),index_js_3=require("../../utils/index.js"),IndicatorContext_js_1=require("./IndicatorContext.js"),TabContext_js_1=require("./TabContext.js");function FluidTab({defaultValue:c,value:d,children:u,onChange:n,style:x,size:h="large",...f}){const o=(0,index_js_1.useAdaptive)(),[j,a]=(0,index_js_3.useControlled)({controlledValue:d,defaultValue:c}),b=(0,react_1.useCallback)(r=>{n?.(r),a(r)},[n,a]),[e,w]=(0,react_1.useState)(0),i=(0,react_1.useRef)(new index_js_2.Animated.Value(e)).current,[t,_]=(0,react_1.useState)(0),y={width:t,transform:[{translateX:i}]};(0,react_1.useEffect)(()=>{index_js_2.Animated.spring(i,{toValue:e,useNativeDriver:!0,...tds_easings_1.spring.quick}).start()},[e,i]);const s=(0,react_1.useRef)(null),l=(0,react_1.useRef)(null);(0,react_1.useEffect)(()=>{s.current!=null&&l.current?.scrollTo({x:Math.max(0,e-(s.current-t)/2)})},[e,t]);const m={...styles.border,borderBottomColor:o.grey200};return(0,jsx_runtime_1.jsx)(TabContext_js_1.TabContext.Provider,{value:{fluid:!0,value:j,onChange:b,size:h},children:(0,jsx_runtime_1.jsx)(IndicatorContext_js_1.IndicatorContext.Provider,{value:{width:t,translateX:e,setWidth:_,setTranslateX:w},children:(0,jsx_runtime_1.jsxs)(react_native_1.View,{onLayout:r=>{s.current=r.nativeEvent.layout.width},children:[(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[m,styles.fluidBorder]}),(0,jsx_runtime_1.jsx)(react_native_1.ScrollView,{ref:l,horizontal:!0,showsHorizontalScrollIndicator:!1,alwaysBounceVertical:!1,children:(0,jsx_runtime_1.jsxs)(react_native_1.View,{children:[(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:[styles.itemList,x],accessibilityRole:"tablist",...f,children:[(0,jsx_runtime_1.jsx)(react_native_1.View,{style:[styles.fluidPadding]}),u]}),(0,jsx_runtime_1.jsx)(index_js_2.Animated.View,{style:[{backgroundColor:o.grey800},styles.indicator,y]})]})})]})})})}const styles=react_native_1.StyleSheet.create({fluidPadding:{width:14,height:1},itemList:{flexDirection:"row",width:"100%"},border:{width:"100%",borderBottomWidth:react_native_1.StyleSheet.hairlineWidth},fluidBorder:{position:"absolute",bottom:2},indicator:{height:2,borderRadius:10,bottom:1}});
