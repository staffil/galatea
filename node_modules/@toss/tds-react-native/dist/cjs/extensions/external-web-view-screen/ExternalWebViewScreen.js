"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExternalWebViewScreen=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_native_webview_1=require("@granite-js/native/react-native-webview"),react_1=require("react"),react_native_1=require("react-native"),mergeRefs_js_1=require("../../utils/mergeRefs.js"),Navigation_js_1=require("./Navigation.js");exports.ExternalWebViewScreen=(0,react_1.forwardRef)(function({header:s={},onNavigationStateChange:c,...o},l){const{title:n,icon:i,withBackButton:u=!1}=s,a=(0,react_1.useRef)(!1),e=(0,react_1.useRef)(null),x=(0,mergeRefs_js_1.mergeRefs)(l,e),r=(0,Navigation_js_1.useBackOrCloseNavigation)(),v=(0,react_1.useCallback)(function(){if(e.current!=null&&a.current){e.current?.goBack();return}r()},[r]);return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(Navigation_js_1.Navigation,{children:[(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationLeft,{visible:u,children:(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationBackButton,{onPress:v,canGoBack:!1})}),(0,jsx_runtime_1.jsxs)(Navigation_js_1.NavigationCenter,{children:[i!=null&&(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationTitleIcon,{...i}),n!=null&&(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationTitleText,{children:n})]}),(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationRight,{children:(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationCloseButton,{})})]}),(0,jsx_runtime_1.jsxs)(react_native_1.View,{style:{display:"flex",flexDirection:"column",flex:1,position:"relative"},children:[(0,jsx_runtime_1.jsx)(Navigation_js_1.NavigationBackdrop,{}),(0,jsx_runtime_1.jsx)(react_native_webview_1.WebView,{ref:x,...o,onNavigationStateChange:t=>{a.current=t.canGoBack,c?.(t)},style:{flex:1}})]})]})});
