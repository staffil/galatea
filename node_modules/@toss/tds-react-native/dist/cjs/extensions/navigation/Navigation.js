"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NavigationIconButton=void 0,exports.Navigation=Navigation,exports.useBackOrCloseNavigation=useBackOrCloseNavigation,exports.NavigationLeft=NavigationLeft,exports.NavigationRight=NavigationRight,exports.NavigationRightWrapper=NavigationRightWrapper,exports.NavigationContent=NavigationContent,exports.NavigationTitleIcon=NavigationTitleIcon,exports.NavigationTitleText=NavigationTitleText,exports.NavigationBackButton=NavigationBackButton;const jsx_runtime_1=require("react/jsx-runtime"),native_1=require("@granite-js/native/@react-navigation/native"),react_native_1=require("@granite-js/react-native"),tds_colors_1=require("@toss/tds-colors"),react_1=require("react"),react_native_2=require("react-native"),index_js_1=require("../../components/asset/index.js"),index_js_2=require("../../components/navbar/index.js"),index_js_3=require("../../components/txt/index.js"),index_js_4=require("../../constants/index.js"),index_js_5=require("../../core/index.js"),useTypographyLevel_js_1=require("../../core/hooks/useTypographyLevel.js"),index_js_6=require("../../extensions/prevent-font-scaling/index.js"),index_js_7=require("../top-navigation/index.js");function hasValidChild(e){return react_1.Children.toArray(e).length>0}function Navigation({children:e}){const t=(0,native_1.useNavigation)(),n=(0,index_js_5.useAdaptive)(),{colorPreference:i}=(0,index_js_5.useColorPreference)(),r=hasValidChild(e);return(0,react_1.useLayoutEffect)(()=>{function o(){t.setOptions({headerStyle:null,statusBarStyle:"auto"})}if(!r){o();return}return t.setOptions({headerStyle:{backgroundColor:n.background},statusBarStyle:i==="dark"?"light":"dark"}),()=>{o()}},[n.background,i,r,t]),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:e})}function useBackOrCloseNavigation(){const e=(0,native_1.useNavigation)();return(0,react_1.useCallback)(()=>{e.canGoBack()?e.goBack():(0,react_native_1.closeView)()},[e])}function NavigationLeft({children:e,visible:t=!0}){const n=(0,native_1.useNavigation)();return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(e)||!t){n.setOptions({headerLeft:null});return}n.setOptions({headerLeft:()=>(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:e})})},[e,n,t]),null}function NavigationRight({children:e,visible:t=!0}){const n=(0,native_1.useNavigation)();return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(e)||!t){n.setOptions({headerRight:null});return}n.setOptions({headerRight:()=>(0,jsx_runtime_1.jsx)(NavigationRightWrapper,{children:e})})},[e,n,t]),null}function NavigationRightWrapper({children:e}){return(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{marginRight:10,flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4,marginLeft:4},children:e})}const DEVICE_WIDTH=react_native_2.Dimensions.get("window").width;function NavigationContent({children:e,visible:t=!0,onPressTitle:n,horizontalSafeMargin:i=0,theme:r="light",withHome:o=!1}){const a=(0,native_1.useNavigation)(),s=(0,index_js_5.useAdaptive)();return(0,react_1.useLayoutEffect)(()=>{if(!hasValidChild(e)||!t){a.setOptions({headerBackVisible:!1,headerTitle:null});return}a.setOptions({headerTitleAlign:"center",headerBackVisible:!1,headerTitle:()=>(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flex:1,marginLeft:react_native_2.Platform.OS==="ios"?-4:0,alignSelf:"flex-start"},children:(0,jsx_runtime_1.jsx)(react_native_2.View,{style:{flexDirection:"row",alignItems:"center",gap:5,maxWidth:DEVICE_WIDTH-i},children:n?(0,jsx_runtime_1.jsx)(react_native_2.TouchableOpacity,{onPress:n,style:{flexDirection:"row",alignItems:"center",gap:5,height:34,paddingLeft:12,paddingRight:10,maxWidth:DEVICE_WIDTH-i,backgroundColor:r==="dark"&&!o?void 0:index_js_7.COLOR_PALETTE[r].backgroundColor,borderRadius:99},children:e}):e})}),headerTintColor:tds_colors_1.colors.grey900})},[s.greyOpacity50,e,i,a,n,r,t,o]),null}function NavigationTitleIcon(e){const t=(0,useTypographyLevel_js_1.useTypographyLevel)(),i=(0,index_js_4.getTypographyMap)(t).t6.fontSize,o=Math.min(i,20),a={width:o,height:o,radius:5};return i>=22&&e.name!=="icon-home-mono"?null:e.name!==void 0?(0,jsx_runtime_1.jsx)(index_js_1.Asset.Icon,{name:e.name,frameShape:a}):(0,jsx_runtime_1.jsx)(react_native_2.Image,{source:e.source,style:{overflow:"hidden",borderRadius:a.radius,width:a.width,height:a.height}})}function NavigationTitleText({style:e,theme:t="light",...n}){return(0,jsx_runtime_1.jsx)(index_js_6.PreventFontScaling,{limit:135,children:(0,jsx_runtime_1.jsx)(index_js_3.Txt,{typography:"t6",fontWeight:"semibold",color:index_js_7.COLOR_PALETTE[t].titleTextColor,numberOfLines:1,ellipsizeMode:"tail",...n})})}function NavigationBackButton({onPress:e,canGoBack:t=!0,theme:n="light"}){const i=useBackOrCloseNavigation();return(0,jsx_runtime_1.jsx)(index_js_2.ReactNavigationNavbar.BackButton,{tintColor:index_js_7.COLOR_PALETTE[n].titleTextColor,accessibilityRole:"button",accessible:!0,accessibilityLabel:t?"\uB4A4\uB85C\uAC00\uAE30":"\uB2EB\uAE30",onPress:()=>{e?.(),t&&i()}})}exports.NavigationIconButton=(0,react_1.forwardRef)(function(t,n){return(0,jsx_runtime_1.jsx)(index_js_2.ReactNavigationNavbar.RightIconButton,{ref:n,...t})});
