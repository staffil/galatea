"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PartnerWebViewScreen=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_native_webview_1=require("@granite-js/native/react-native-webview"),react_native_1=require("@granite-js/react-native"),react_1=require("react"),mergeRefs_js_1=require("../../utils/mergeRefs.js"),index_js_1=require("../navigation/index.js"),TopNavigation_js_1=require("../top-navigation/TopNavigation.js");exports.PartnerWebViewScreen=(0,react_1.forwardRef)(function({header:s,onNavigationStateChange:c,...u},v){const{withBackButton:l=!0,...f}=s,n=(0,react_1.useRef)(!1),r=(0,react_native_1.useBackEventContext)(),e=(0,react_1.useRef)(null),B=(0,mergeRefs_js_1.mergeRefs)(v,e),a=!r.hasBackEvent,i=r.onBack,o=(0,index_js_1.useBackOrCloseNavigation)(),g=(0,react_1.useCallback)(function(){if(!a){i();return}if(e.current!=null&&n.current){e.current?.goBack();return}o()},[a,i,o]);return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)(TopNavigation_js_1.TopNavigation,{...f,children:(0,jsx_runtime_1.jsx)(index_js_1.NavigationLeft,{visible:l,children:(0,jsx_runtime_1.jsx)(index_js_1.NavigationBackButton,{onPress:g,canGoBack:!1})})}),(0,jsx_runtime_1.jsx)(react_native_webview_1.WebView,{ref:B,...u,onNavigationStateChange:t=>{n.current=t.canGoBack,c?.(t)},style:{flex:1}})]})});
