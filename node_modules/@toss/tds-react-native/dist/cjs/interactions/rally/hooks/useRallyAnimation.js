"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRallyAnimation=useRallyAnimation;const react_1=require("react"),react_native_1=require("react-native"),index_js_1=require("../operations/index.js"),useCurrentProgressStyle_js_1=require("./useCurrentProgressStyle.js");function useRallyAnimation({motionInputs:s,layout:a}){const r=(0,react_1.useRef)(new react_native_1.Animated.Value(0)).current,l=(0,useCurrentProgressStyle_js_1.useCurrentProgressStyleIndex)(r,{motionLength:s.length}),t=(0,react_1.useMemo)(()=>(0,index_js_1.toMotions)(s,a),[s,a]),o=(0,react_1.useMemo)(()=>t.map((e,n)=>{const d=(0,index_js_1.createInterpolationStyle)(r,{motion:e,inputRange:[n,n+1]}),g=(0,index_js_1.createMotionAnimation)({progress:r,toValue:n+1,motion:e}),m=(0,index_js_1.createMotionAnimation)({progress:r,toValue:n,motion:e});return{style:d,forward:(0,index_js_1.toAnimationController)(g,{progress:r,endProgress:t.length}),backward:(0,index_js_1.toAnimationController)(m,{progress:r,endProgress:t.length})}}),[t,r]),c=index_js_1.Animation.sequence(o.map(e=>e.forward)),i=index_js_1.Animation.sequence([...o.map(e=>e.backward).reverse()]),u=o.map(e=>e.style)[l];return(0,react_1.useMemo)(()=>({forward:c,backward:i,style:u}),[c,i,u])}
