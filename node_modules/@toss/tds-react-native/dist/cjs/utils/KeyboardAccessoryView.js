"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardAccessoryView=KeyboardAccessoryView;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),react_native_1=require("react-native");function KeyboardAccessoryView({style:n,contentContainerStyle:o,enabled:a=!0,children:r,onLayout:i,keyboardVerticalOffset:d,...f}){const[u,b]=(0,react_1.useState)(null),[l,h]=(0,react_1.useState)(null),c=useIOSReduceMotionEnabled(),m=(0,react_1.useRef)(null),s=(0,react_1.useCallback)(e=>{const{duration:t,easing:y}=e;t&&y&&!c&&react_native_1.LayoutAnimation.configureNext({duration:t>10?t:10,update:{duration:t>10?t:10,type:react_native_1.LayoutAnimation.Types[y]||"keyboard"}}),b(e)},[c]),E=(0,react_1.useCallback)(e=>{h(e.nativeEvent.layout),i?.(e)},[i]);(0,react_1.useEffect)(()=>{const e=new Set;return react_native_1.Platform.OS==="ios"?e.add(react_native_1.Keyboard.addListener("keyboardWillChangeFrame",s)):react_native_1.Platform.OS==="android"&&(e.add(react_native_1.Keyboard.addListener("keyboardDidHide",s)),e.add(react_native_1.Keyboard.addListener("keyboardDidShow",s))),()=>{e.forEach(t=>{t?.remove()})}},[s]);const S=l==null||u==null?0:getKeyboardHeight({layoutFrame:l,keyboardFrame:u.endCoordinates,offset:d??0,isReduceMotionEnabled:c});return(0,jsx_runtime_1.jsx)(react_native_1.View,{ref:m,style:react_native_1.StyleSheet.compose(n,{paddingBottom:a?S:void 0}),onLayout:E,...f,children:r})}function getKeyboardHeight({layoutFrame:n,keyboardFrame:o,offset:a=0,isReduceMotionEnabled:r}){if(r&&o.screenY===0)return 0;const d=o.screenY-a;return Math.max(n.y+n.height-d,0)}function useIOSReduceMotionEnabled(){const[n,o]=(0,react_1.useState)(!1);return(0,react_1.useEffect)(()=>{async function a(){try{const r=await react_native_1.AccessibilityInfo.isReduceMotionEnabled();o(r)}catch{}}react_native_1.Platform.OS==="ios"&&a()},[]),n}
