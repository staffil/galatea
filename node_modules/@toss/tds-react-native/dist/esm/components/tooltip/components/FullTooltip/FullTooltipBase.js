"use strict";import{jsx as n,jsxs as P}from"react/jsx-runtime";import{Svg as j,Path as C}from"@granite-js/native/react-native-svg";import{colors as p}from"@toss/tds-colors";import{bezier as E,spring as x}from"@toss/tds-easings";import{hexToRgba as T}from"@toss/utils";import{useCallback as b,useEffect as D,useMemo as F,useRef as g,useState as O}from"react";import{Dimensions as R,Easing as _,View as H}from"react-native";import{Animated as t}from"../../../../interactions/animated/index.js";import{useAnnounce as z}from"../../../../utils/useAnnounce.js";import*as k from"../../../paragraph/index.js";import{createTooltipOutlinePath as q}from"../../utils/createFullTooltipAnchorPath.js";import{HiddenFullTooltip as B}from"./HiddenFullTooltip.js";export const ANCHOR_HEIGHT=12,ANCHOR_WIDTH=38;export function FullTooltipBase({open:i,placement:l,anchorMarginLeft:o=0,messageAlign:f="center",message:e,style:s,animationDelay:a=0,withAnimation:m=!0,anchorOverlapped:c=!1}){const[u,h]=O(0),r=m?a:0,y=m?200:0,{announce:w}=z(),{fullMessageStyle:N,fullTooltipStyle:A,enterMotion:v,exitMotion:V}=I({messageHeight:u,delay:r,duration:y,anchorOverlapped:c});return D(()=>{i?v():V()},[v,V,i]),D(()=>{i&&e&&w(e,{queue:!0,delay:r+200})},[i,e,w,r]),u===0?n(B,{message:e,onLayout:S=>{h(S.nativeEvent.layout.height)}}):P(t.View,{style:[{position:"relative",width:"100%"},A,s],children:[l==="bottom"?n(H,{style:[{height:ANCHOR_HEIGHT},c?{position:"absolute",top:-ANCHOR_HEIGHT,width:"100%",left:0}:void 0],children:n(M,{anchorMarginLeft:o,messageHeight:u})}):void 0,n(t.View,{style:{backgroundColor:T(p.teal400,.15)},children:n(t.View,{style:[N,{width:"100%",paddingVertical:16,paddingHorizontal:24}],children:n(k.Text,{typography:"t6",color:p.teal600,fontWeight:"bold",style:{textAlign:f},children:e})})}),l==="top"?n(H,{style:[{height:ANCHOR_HEIGHT,transform:[{scaleY:-1}]},c?{position:"absolute",width:"100%",bottom:-ANCHOR_HEIGHT}:void 0],children:n(M,{anchorMarginLeft:o,messageHeight:u})}):void 0]})}const d=_.bezier(...E.out);function I({messageHeight:i,delay:l,duration:o,anchorOverlapped:f}){const e=g(new t.Value(0)).current,s=g(new t.Value(0)).current,a=g(new t.Value(0)).current,m={opacity:e},c={height:s,opacity:a},u=b(()=>{const r={easing:d,duration:o};t.sequence([t.delay(l),t.parallel([t.timing(a,{toValue:1,delay:.5,useNativeDriver:!1,...r}),t.timing(e,{toValue:1,delay:.5,useNativeDriver:!1,...r}),t.spring(s,{toValue:i+ANCHOR_HEIGHT,useNativeDriver:!1,...x.basic})])]).start()},[l,o,e,s,a,i]),h=b(()=>{t.parallel([t.timing(a,{toValue:0,easing:d,duration:o,useNativeDriver:!1}),t.timing(e,{toValue:0,easing:d,duration:o,useNativeDriver:!1}),t.spring(s,{toValue:f?ANCHOR_HEIGHT:0,useNativeDriver:!1,...x.basic})]).start()},[f,o,e,s,a]);return{fullMessageStyle:m,fullTooltipStyle:c,enterMotion:u,exitMotion:h}}function M({messageHeight:i,anchorMarginLeft:l}){const o=F(()=>q({anchorPosition:l,height:i,width:R.get("window").width}),[i,l]);return n(j,{width:"100%",height:ANCHOR_HEIGHT,viewBox:`0 0 100 ${ANCHOR_HEIGHT}`,children:n(C,{d:o,fill:T(p.teal400,.15)})})}
