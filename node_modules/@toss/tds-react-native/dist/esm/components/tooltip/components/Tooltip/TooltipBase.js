"use strict";import{jsx as i,jsxs as A}from"react/jsx-runtime";import{colors as m}from"@toss/tds-colors";import{spring as f}from"@toss/tds-easings";import{forwardRef as P,useEffect as p,useMemo as Y}from"react";import{Platform as j,Pressable as C,View as g}from"react-native";import{useAdaptive as V,useColorPreference as T}from"../../../../core/index.js";import{Animated as z}from"../../../../interactions/animated/index.js";import{useRally as B}from"../../../../interactions/rally/index.js";import{useAnnounce as X}from"../../../../utils/useAnnounce.js";import*as k from"../../../paragraph/index.js";import{useTooltip as v}from"../../contexts/TooltipContext.js";import{Anchor as S}from"./Anchor.js";const q=z.createAnimatedComponent(C);export const TooltipBase=P(function({size:a="medium",placement:s,anchorMarginLeft:h=0,message:r,motion:u,messageAlign:y="left",contentHeight:b,left:O,top:x,onPress:H},w){const c=V(),{colorPreference:W}=T(),{flipped:d}=v(),{announce:l}=X(),o=Y(()=>getTooltipStyle(a),[a]),t=s==="bottom"?"top":"bottom",e=B({motion:u==="strong"?[{opacity:{from:0,to:1},scale:{from:0,to:1.25},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:t,to:t},easing:f.quick},{scale:{from:1.25,to:1},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:t,to:t},easing:{stiffness:300,damping:15}}]:{opacity:{from:0,to:1},scale:{from:0,to:1},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:t,to:t},easing:f.medium},exit:{opacity:{from:1,to:0},scale:{from:1,to:0},transformOriginX:{from:"center",to:"center"},transformOriginY:{from:t,to:t},easing:f.medium}});return p(()=>{e.play()},[e]),p(()=>{r&&l(r,{queue:!0,delay:100})},[r,l]),A(q,{ref:w,onPress:H,onLayout:R=>{e.onLayout(R)},style:[{opacity:0,transform:[{scale:0}],zIndex:9e3,position:"absolute",backgroundColor:c.floatBackground,borderRadius:o.borderRadius,paddingHorizontal:o.paddingHorizontal/2,paddingVertical:o.paddingVertical/2,shadowColor:W==="light"?j.OS==="ios"?m.greyOpacity500:void 0:m.greyOpacity900,shadowOffset:{width:0,height:d?-16:16},shadowOpacity:1,shadowRadius:60,elevation:40,left:O,top:x},e.style],children:[i(g,{style:{position:"absolute",justifyContent:"center",alignItems:"center",top:s==="top"?b-4:-o.anchorHeight+2,left:h,width:o.anchorWidth,height:o.anchorHeight+2,transform:s==="top"?[{scaleY:-1}]:[]},children:i(S,{size:a})}),i(g,{style:{flexDirection:"row",justifyContent:"center",alignSelf:"flex-start",transform:[{scaleY:d?-1:1}]},children:i(k.Text,{typography:o.typography,color:c.grey800,fontWeight:o.fontWeight,style:{textAlign:y},children:r})})]})});export function getTooltipStyle(n){return n==="small"?{borderRadius:12,paddingVertical:16,paddingHorizontal:24,anchorHeight:9,anchorWidth:24,typography:"t7",fontWeight:"semiBold"}:n==="large"?{borderRadius:18,paddingVertical:26,paddingHorizontal:40,anchorHeight:12,anchorWidth:38,typography:"t5",fontWeight:"bold"}:{borderRadius:16,paddingVertical:26,paddingHorizontal:32,anchorHeight:12,anchorWidth:38,typography:"t6",fontWeight:"bold"}}
