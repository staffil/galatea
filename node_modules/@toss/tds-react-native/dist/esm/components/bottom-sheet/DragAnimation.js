"use strict";import{jsx as N}from"react/jsx-runtime";import{Gesture as u,GestureDetector as D}from"@granite-js/native/react-native-gesture-handler";import{bezier as j,spring as a}from"@toss/tds-easings";import{useMemo as l,useRef as c}from"react";import{Animated as t,Easing as d}from"react-native";export function BottomSheetDragAnimation({children:X,onDraggedUp:m,onDraggedDown:f,onDraggedMiddle:g,onDragToClose:p,onDragFinished:v,unstable_disableDragging:b=!1,...h}){const r=c(new t.Value(1)).current,n=c(new t.Value(0)).current,s=c(new t.Value(0)).current,i=l(()=>u.Pan().activateAfterLongPress(200).onUpdate(e=>{const S=Math.log(Math.abs(e.translationX)+10)*5,w=Math.log(15)*5,z=Math.sign(e.translationX)*Math.max(S-w,0),G=Math.log(Math.abs(e.translationY)+10)*15,P=Math.log(15)*15,A=Math.sign(e.translationY)*Math.max(G-P,0),M=j.linear,Y=e.translationY<0?.1:.01;t.parallel([t.timing(n,{toValue:z,duration:Y,easing:d.bezier(...M),useNativeDriver:!0}),t.timing(s,{toValue:A,duration:Y,easing:d.bezier(...M),useNativeDriver:!0})]).start(),e.translationY<=-50?m?.():e.translationY>=10?f?.():g?.()}).onFinalize(e=>{t.parallel([t.spring(r,{toValue:1,...a.rapid,useNativeDriver:!0}),t.spring(n,{toValue:0,...a.quick,useNativeDriver:!0}),t.spring(s,{toValue:0,...a.quick,useNativeDriver:!0})]).start(),e.translationY>=50&&p?.(),v?.()}),[v,p,f,g,m,r,n,s]),o=l(()=>u.LongPress().onStart(()=>{t.spring(r,{toValue:.98,...a.rapid,useNativeDriver:!0}).start()}).onEnd(()=>{t.spring(r,{toValue:1,...a.rapid,useNativeDriver:!0}).start()}),[r]),x=l(()=>(i.runOnJS(!0),o.runOnJS(!0),u.Simultaneous(i,o)),[i,o]),V=N(t.View,{...h,style:[{transform:[{translateX:n},{translateY:s},{scale:r}]},h.style],children:X});return b?V:N(D,{gesture:x,children:V})}
