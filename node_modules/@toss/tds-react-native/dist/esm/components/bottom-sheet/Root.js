"use strict";import{jsx as o,jsxs as r}from"react/jsx-runtime";import{ScrollView as k}from"@granite-js/native/react-native-gesture-handler";import{Children as T,useCallback as s,useEffect as _,useMemo as F,useRef as I}from"react";import{Keyboard as M,View as p}from"react-native";import{useHideAccessibility as V}from"../../core/contexts/HideAccessibility.js";import{useFontScaleCondition as K}from"../../core/index.js";import{a11yCondition as P}from"./const.js";import{BottomSheetContainer as U}from"./Container.js";import{BottomSheetDimmer as q}from"./Dimmer.js";import{BottomSheetHandle as z}from"./Handle.js";import{BottomSheetHeaderContainer as G}from"./HeaderContainer.js";import{BottomSheetRenderingAnimation as c}from"./utils/RenderingAnimation.js";export function BottomSheetRoot({open:e,header:t,headerDescription:n,cta:y,disableDimmer:D=!1,children:S,onDimmerClick:b,onClose:d,onExited:C,style:x,wrapper:A=k,wrapperProps:B,a11yIncludeHeaderInScroll:j=!0,unstable_disableDragging:v=!1}){const i=V(),l=I(null),m=s(()=>{M.dismiss(),d?.()},[d]),w=s(()=>{l.current?.darken()},[]),E=s(()=>{l.current?.lighten(.5)},[]),u=s(()=>{l.current?.reset()},[]),H=t!=null?30:0,R=F(()=>[t,n].filter(a=>a!=null).length*30,[t,n]),f=K(P.root)&&j,g=t!=null||n!=null?r(G,{children:[o(c,{children:t}),o(c,{delay:H,children:n})]}):null;return _(()=>(e?i.activate():i.inactivate(),i.inactivate),[i,e]),r(p,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},pointerEvents:e?"auto":"none",onAccessibilityEscape:()=>{m?.()},children:[D?null:o(q,{ref:l,open:e,onPress:()=>{m?.(),b?.()}}),r(U,{open:e,onExited:C,onDraggedUp:w,onDraggedMiddle:u,onDraggedDown:E,onDragToClose:m,onDragFinished:u,style:x,unstable_disableDragging:v,children:[r(p,{children:[o(z,{}),!f&&g]}),r(A,{...B,children:[f&&g,T.map(S,(a,h)=>o(c,{delay:R+h*30,children:a},h))]}),y]})]})}
