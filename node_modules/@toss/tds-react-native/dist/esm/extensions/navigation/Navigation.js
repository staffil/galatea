"use strict";import{Fragment as d,jsx as o}from"react/jsx-runtime";import{useNavigation as s}from"@granite-js/native/@react-navigation/native";import{closeView as x}from"@granite-js/react-native";import{colors as v}from"@toss/tds-colors";import{Children as C,forwardRef as b,useCallback as k,useLayoutEffect as c}from"react";import{Dimensions as I,Image as O,Platform as B,TouchableOpacity as N,View as f}from"react-native";import{Asset as T}from"../../components/asset/index.js";import{ReactNavigationNavbar as p}from"../../components/navbar/index.js";import{Txt as w}from"../../components/txt/index.js";import{getTypographyMap as L}from"../../constants/index.js";import{useAdaptive as m,useColorPreference as R}from"../../core/index.js";import{useTypographyLevel as S}from"../../core/hooks/useTypographyLevel.js";import{PreventFontScaling as D}from"../../extensions/prevent-font-scaling/index.js";import{COLOR_PALETTE as g}from"../top-navigation/index.js";function u(t){return C.toArray(t).length>0}export function Navigation({children:t}){const e=s(),n=m(),{colorPreference:i}=R(),l=u(t);return c(()=>{function r(){e.setOptions({headerStyle:null,statusBarStyle:"auto"})}if(!l){r();return}return e.setOptions({headerStyle:{backgroundColor:n.background},statusBarStyle:i==="dark"?"light":"dark"}),()=>{r()}},[n.background,i,l,e]),o(d,{children:t})}export function useBackOrCloseNavigation(){const t=s();return k(()=>{t.canGoBack()?t.goBack():x()},[t])}export function NavigationLeft({children:t,visible:e=!0}){const n=s();return c(()=>{if(!u(t)||!e){n.setOptions({headerLeft:null});return}n.setOptions({headerLeft:()=>o(d,{children:t})})},[t,n,e]),null}export function NavigationRight({children:t,visible:e=!0}){const n=s();return c(()=>{if(!u(t)||!e){n.setOptions({headerRight:null});return}n.setOptions({headerRight:()=>o(NavigationRightWrapper,{children:t})})},[t,n,e]),null}export function NavigationRightWrapper({children:t}){return o(f,{style:{marginRight:10,flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4,marginLeft:4},children:t})}const h=I.get("window").width;export function NavigationContent({children:t,visible:e=!0,onPressTitle:n,horizontalSafeMargin:i=0,theme:l="light",withHome:r=!1}){const a=s(),y=m();return c(()=>{if(!u(t)||!e){a.setOptions({headerBackVisible:!1,headerTitle:null});return}a.setOptions({headerTitleAlign:"center",headerBackVisible:!1,headerTitle:()=>o(f,{style:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center",flex:1,marginLeft:B.OS==="ios"?-4:0,alignSelf:"flex-start"},children:o(f,{style:{flexDirection:"row",alignItems:"center",gap:5,maxWidth:h-i},children:n?o(N,{onPress:n,style:{flexDirection:"row",alignItems:"center",gap:5,height:34,paddingLeft:12,paddingRight:10,maxWidth:h-i,backgroundColor:l==="dark"&&!r?void 0:g[l].backgroundColor,borderRadius:99},children:t}):t})}),headerTintColor:v.grey900})},[y.greyOpacity50,t,i,a,n,l,e,r]),null}export function NavigationTitleIcon(t){const e=S(),i=L(e).t6.fontSize,r=Math.min(i,20),a={width:r,height:r,radius:5};return i>=22&&t.name!=="icon-home-mono"?null:t.name!==void 0?o(T.Icon,{name:t.name,frameShape:a}):o(O,{source:t.source,style:{overflow:"hidden",borderRadius:a.radius,width:a.width,height:a.height}})}export function NavigationTitleText({style:t,theme:e="light",...n}){return o(D,{limit:135,children:o(w,{typography:"t6",fontWeight:"semibold",color:g[e].titleTextColor,numberOfLines:1,ellipsizeMode:"tail",...n})})}export function NavigationBackButton({onPress:t,canGoBack:e=!0,theme:n="light"}){const i=useBackOrCloseNavigation();return o(p.BackButton,{tintColor:g[n].titleTextColor,accessibilityRole:"button",accessible:!0,accessibilityLabel:e?"\uB4A4\uB85C\uAC00\uAE30":"\uB2EB\uAE30",onPress:()=>{t?.(),e&&i()}})}export const NavigationIconButton=b(function(e,n){return o(p.RightIconButton,{ref:n,...e})});
