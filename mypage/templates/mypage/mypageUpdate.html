{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" style="background-color: #3b0d69;">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% trans "마이페이지 - GALATEA" %}</title>
    <link rel="stylesheet" href="{% static 'css/mypage/mypageUpdate.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
        <!-- Open Graph (SNS 공유용) -->
    <meta property="og:title" content="GALATEA AI - 음성 대화형 챗봇" />
    <meta property="og:description" content="자연스러운 음성 대화형 AI 챗봇. 고객과 사람처럼 대화하며 상담과 안내를 제공합니다." />
    <meta property="og:image" content="https://galatea.website/static/img/intro2.png">
    <meta property="og:url" content="https://galatea.website" />
    <meta property="og:type" content="website" />

    <!-- Meta Description (검색 결과용) -->
    <meta name="description" content="문자만 입력하는 챗봇은 이제 그만! GALATEA AI는 음성 기반 대화형 AI로, 실제 사람처럼 대화 경험을 제공합니다. GALATEA AI는 단순한 챗봇이 아닙니다. 음성으로 사람처럼 대화하며, 자연스러운 상담·안내를 제공합니다. 지금 무료 체험으로 직접 경험해보세요. ">

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "GALATEA AI",
  "url": "https://www.galatea.website",
  "logo": "https://www.galatea.website/static/img/logo.png"
}
</script>

</head>
<body>
<header>
    {% if not user.is_authenticated %}
        {% include "common/notLoginHeader.html" %}
    {% else %}
        {% include "common/loginHeader.html" %}
    {% endif %}
</header>

   <!-- 배경 원형 효과 (distribute.css에서 사용) -->
    <div class="circle-bg circle-1"></div>
    <div class="circle-bg circle-2"></div>
    <div class="circle-bg circle-3"></div>
    <div class="circle-bg circle-4"></div>
    <div class="circle-bg circle-5"></div>

    <!-- 햄버거 메뉴 버튼 (모바일용) -->
    <button class="menu-toggle" onclick="toggleSidebar()">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- 사이드바 오버레이 (모바일용) -->
    <div class="sidebar-overlay" onclick="closeSidebar()"></div>
          {% include "common/sidebar.html" %}


    <div class="main-content">
        <div class="profile-section">
            <h2>{% trans "프로필" %}</h2>
            <div class="profile-main">
                <div>
                    {% if user.user_image %}
                        <img src="{{ user.user_image.url }}" alt="{% trans "프로필 이미지" %}" class="profile-avatar" />
                    {% else %}
                        <div class="profile-avatar">{{ user.nickname|first|default:"U" }}</div>
                    {% endif %}
                </div>

                <form method="POST" action="{% url 'mypage:mypage_update' %}" enctype="multipart/form-data" class="profile-form">
                    {% csrf_token %}
                    <div class="form-group">
                        <label>{% trans "닉네임" %}</label>
                        <input type="nickname" name = 'nickname' value="{{ user.nickname }}"  />
                    </div>
                    <div class="form-group">
                        <label>{% trans "아이디:" %}</label>
                        <input type="text" value="{{ user.username }}" readonly />
                    </div>
                    <div class="form-group">
                        <label>{% trans "이메일:" %}</label>
                        <input type="email" name="email" value="{{ user.email }}" required />
                    </div>
                    <div class="form-group">
                        <label>{% trans "전화번호:" %}</label>
                        <input type="text" name="phonenumber" value="{{ user.phonenumber }}" required />
                    </div>

                    {% if not user.oauth_provider %}
                    <hr style="margin: 20px 0; border: 1px solid rgba(139, 92, 246, 0.3);">
                    <h3 style="color: #8b5cf6; margin-bottom: 15px;">{% trans "비밀번호 변경" %}</h3>
                    <div class="form-group">
                        <label>{% trans "현재 비밀번호:" %}</label>
                        <input type="password" name="current_password" placeholder="{% trans '현재 비밀번호' %}" />
                    </div>
                    <div class="form-group">
                        <label>{% trans "새 비밀번호:" %}</label>
                        <input type="password" name="password1" placeholder="{% trans '새 비밀번호 (최소 8자)' %}" />
                    </div>
                    <div class="form-group">
                        <label>{% trans "새 비밀번호 확인:" %}</label>
                        <input type="password" name="password2" placeholder="{% trans '비밀번호 확인' %}" />
                    </div>
                    {% else %}
                    <div class="form-group">
                        <p style="color: #8b5cf6; font-size: 14px;">
                            {% trans "소셜 로그인 사용자는 비밀번호를 변경할 수 없습니다." %}
                        </p>
                    </div>
                    {% endif %}
                    <div class="form-group">
                        <label>{% trans "프로필 이미지:" %}</label>
                        <input type="file" name="user_image" accept="image/*" />
                    </div>
                    <button type="submit" class="submit-btn" onclick="return check()">{% trans "수정완료" %}</button>
                    <a href="{% url 'mypage:mypage' %}">{% trans "이전으로" %}</a>
                </form>
            </div>
        </div>
    </div>
<script src="{% static 'js/sidebar.js' %}"></script>

    <script src="{% static 'js/mypage/mypageUpdate.js' %}"></script>
</body>
</html>
