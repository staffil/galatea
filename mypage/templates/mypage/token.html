{% load i18n static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" style="background-color: #3b0d69;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#8b5cf6">
    <title>{% trans "마이페이지 - GALATEA" %}</title>
    <link rel="stylesheet" href="{% static 'css/mypage/my_voice.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <link rel="stylesheet" href="{% static 'css/mypage/token.css' %}">

</head>
<body>
    <!-- 배경 원형 효과 -->
    <div class="circle-bg"></div>
    <div class="circle-bg"></div>
    <div class="circle-bg"></div>
  <!-- 햄버거 메뉴 버튼 -->
    <button class="menu-toggle" onclick="toggleSidebar()">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <!-- 사이드바 오버레이 -->
    <div class="sidebar-overlay" onclick="closeSidebar()"></div>

    {% include "common/sidebar.html" %}
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">{% trans "토큰 관리" %}</h1>
        </div>

        <div class="token-summary">
            <h2>{% trans "토큰 요약" %}</h2>
            <ul class="token-stats">
                <li class="token-card total">
                    <span class="token-icon"></span>
                    <div class="token-info">
                        <div class="token-label">{% trans "총 토큰" %}</div>
                        <div class="token-value">{{ total|default:"0" }}</div>
                        <div class="token-description">{% trans "구매한 전체 토큰" %}</div>
                    </div>
                </li>
                <li class="token-card used">
                    <span class="token-icon"></span>
                    <div class="token-info">
                        <div class="token-label">{% trans "사용한 토큰" %}</div>
                        <div class="token-value">{{ used|default:"0" }}</div>
                        <div class="token-description">{% trans "이미 소모된 토큰" %}</div>
                    </div>
                </li>
                <li class="token-card remaining">
                    <span class="token-icon"></span>
                    <div class="token-info">
                        <div class="token-label">{% trans "남은 토큰" %}</div>
                        <div class="token-value">{{ remaining|default:"0" }}</div>
                        <div class="token-description">{% trans "사용 가능한 토큰" %}</div>
                    </div>
                </li>
            </ul>
            
            <!-- 토큰 사용률 진행률 바 -->
            <div class="token-progress">
<div class="token-progress-bar" style="width: {{ usage_percent }}%"></div>
<div class="token-progress-text">
    {% trans "토큰 사용률" %}: <strong>{{ usage_percent|floatformat:1 }}%</strong>
</div>

        </div>

        <div class="payment-section">
            <h3>{% trans "결제 내역" %}</h3>
            <table class="payment-table">
                <thead>
                    <tr>
                        <th>{% trans "날짜" %}</th>
                        <th>{% trans "상태" %}</th>
                        <th>{% trans "결제 금액" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% if payments %}
                        {% for p in payments %}
                        <tr>
                            <td>{{ p.paid_at|date:"Y-m-d H:i" }}</td>
                            <td>{{ p.status }}</td>
                            <td>{{ p.amount }}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4">{% trans "결제 내역이 없습니다." %}</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
<script src="{% static 'js/sidebar.js' %}"></script>

    <script src="{% static 'js/mypage/token.js' %}">

    </script>
</body>
</html>